{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 113, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/genreshift-web/app/utils/offlineSupport.js"],"sourcesContent":["'use client';\r\n\r\n/**\r\n * 提取内容中的关键词和出现次数\r\n * @param {string} text 要分析的文本内容\r\n * @returns {string[]} 关键词数组\r\n */\r\nexport const extractKeywords = (text) => {\r\n  // 简单的关键词提取\r\n  const words = text.toLowerCase().split(/\\s+|[,.;:\"'?!，。；：\"\"'？！]/);\r\n  const stopWords = new Set(['the', 'a', 'an', 'in', 'on', 'at', 'of', 'to', 'and', 'is', 'are', 'was', 'were', 'be', 'been', 'being', 'this', 'that', 'these', 'those', '的', '了', '和', '与', '是', '在', '有', '被']);\r\n  \r\n  // 统计词频\r\n  const wordCount = {};\r\n  words.forEach(word => {\r\n    if (word.length > 1 && !stopWords.has(word)) {\r\n      wordCount[word] = (wordCount[word] || 0) + 1;\r\n    }\r\n  });\r\n  \r\n  // 排序并返回前10个\r\n  return Object.entries(wordCount)\r\n    .sort((a, b) => b[1] - a[1])\r\n    .slice(0, 10)\r\n    .map(([word]) => word);\r\n};\r\n\r\n/**\r\n * 生成离线后备内容\r\n * @param {string} content 原始内容\r\n * @param {object} parameters 转换参数\r\n * @returns {string} 生成的Markdown内容\r\n */\r\nexport const generateOfflineContent = (content, parameters) => {\r\n  if (!content) return '';\r\n  \r\n  // 提取内容\r\n  const extractedContent = content.substring(0, 1000);\r\n  const sentences = extractedContent.split(/[.!?。！？]+/).filter(s => s.trim().length > 0);\r\n  const keywords = extractKeywords(extractedContent);\r\n  \r\n  const language = parameters.language === 'zh' ? 'zh' : 'en';\r\n  const style = parameters.outputStyle;\r\n  const resultLength = parameters.length;\r\n  \r\n  if (language === 'zh') {\r\n    return generateChineseFallback(sentences, keywords, style, resultLength);\r\n  } else {\r\n    return generateEnglishFallback(sentences, keywords, style, resultLength);\r\n  }\r\n};\r\n\r\n/**\r\n * 生成中文后备内容\r\n */\r\nconst generateChineseFallback = (sentences, keywords, style, resultLength) => {\r\n  // 提取标题\r\n  const title = sentences[0]?.trim() || '论文概述';\r\n  \r\n  // 根据风格选择模板\r\n  let template = '';\r\n  \r\n  if (style === 'news') {\r\n    template = `# ${title.length > 20 ? title.substring(0, 20) + '...' : title}\\n\\n`;\r\n    template += `**关键要点**: ${keywords.slice(0, 5).join('、')}\\n\\n`;\r\n    template += `${sentences.slice(0, 3).join('。')}。\\n\\n`;\r\n    \r\n    if (resultLength !== 'short') {\r\n      template += `## 研究背景\\n\\n${sentences.slice(3, 5).join('。')}。\\n\\n`;\r\n      template += `## 研究方法\\n\\n据研究团队介绍，他们采用了创新的研究方法进行分析。${sentences.slice(5, 7).join('。')}。\\n\\n`;\r\n    }\r\n    \r\n    if (resultLength === 'long') {\r\n      template += `## 研究意义\\n\\n这项研究对${keywords[0]}领域具有重要意义。${sentences.slice(7, 10).join('。')}。\\n\\n`;\r\n      template += `## 未来展望\\n\\n研究团队表示，未来将继续深入研究这一问题，进一步探索${keywords.slice(1, 3).join('和')}的关系。\\n\\n`;\r\n    }\r\n    \r\n    template += `*注：本内容由系统离线生成，仅作参考。由于网络原因，无法获取完整的转换结果。*`;\r\n  } else if (style === 'blog') {\r\n    template = `# 探索${keywords[0]}的新视角：${title.length > 15 ? title.substring(0, 15) + '...' : title}\\n\\n`;\r\n    template += `近期，一项关于${keywords.slice(0, 3).join('、')}的研究引起了我的注意。${sentences.slice(0, 3).join('。')}。\\n\\n`;\r\n    \r\n    if (resultLength !== 'short') {\r\n      template += `## 为什么这很重要？\\n\\n${sentences.slice(3, 6).join('。')}。这些发现对于理解${keywords[0]}具有重要意义。\\n\\n`;\r\n    }\r\n    \r\n    if (resultLength === 'long') {\r\n      template += `## 深入分析\\n\\n如果仔细分析这项研究，我们可以发现几个关键点：\\n\\n- ${keywords[0]}与${keywords[1]}之间存在密切关联\\n- 研究方法新颖，采用了创新的分析框架\\n- 结果对${keywords[2]}领域提供了新的思路\\n\\n`;\r\n      template += `## 我的看法\\n\\n个人认为，这项研究虽然有价值，但仍有改进空间。未来研究可以更深入地探索${keywords.slice(3, 5).join('和')}的关系。\\n\\n`;\r\n    }\r\n    \r\n    template += `*注：本内容由系统离线生成，仅作参考。由于网络原因，无法获取完整的转换结果。*`;\r\n  } else {\r\n    // 摘要\r\n    template = `# ${title}摘要\\n\\n`;\r\n    template += `**核心概念**: ${keywords.slice(0, 5).join('、')}\\n\\n`;\r\n    template += `${sentences.slice(0, 3).join('。')}。\\n\\n`;\r\n    \r\n    if (resultLength !== 'short') {\r\n      template += `## 主要内容\\n\\n${sentences.slice(3, 8).join('。')}。\\n\\n`;\r\n    }\r\n    \r\n    if (resultLength === 'long') {\r\n      template += `## 研究结论\\n\\n基于以上内容，研究得出以下结论：\\n\\n- 关于${keywords[0]}的新发现\\n- ${keywords[1]}与${keywords[2]}的关系\\n- 对${keywords[3]}理论的验证\\n\\n`;\r\n    }\r\n    \r\n    template += `*注：本内容由系统离线生成，仅作参考。由于网络原因，无法获取完整的转换结果。*`;\r\n  }\r\n  \r\n  return template;\r\n};\r\n\r\n/**\r\n * 生成英文后备内容\r\n */\r\nconst generateEnglishFallback = (sentences, keywords, style, resultLength) => {\r\n  // 提取标题\r\n  const title = sentences[0]?.trim() || 'Paper Overview';\r\n  \r\n  // 根据风格选择模板\r\n  let template = '';\r\n  \r\n  if (style === 'news') {\r\n    template = `# ${title.length > 20 ? title.substring(0, 20) + '...' : title}\\n\\n`;\r\n    template += `**Key Points**: ${keywords.slice(0, 5).join(', ')}\\n\\n`;\r\n    template += `${sentences.slice(0, 3).join('. ')}.\\n\\n`;\r\n    \r\n    if (resultLength !== 'short') {\r\n      template += `## Research Background\\n\\n${sentences.slice(3, 5).join('. ')}.\\n\\n`;\r\n      template += `## Methodology\\n\\nAccording to the research team, they employed innovative research methods for analysis. ${sentences.slice(5, 7).join('. ')}.\\n\\n`;\r\n    }\r\n    \r\n    if (resultLength === 'long') {\r\n      template += `## Significance\\n\\nThis research has important implications for the field of ${keywords[0]}. ${sentences.slice(7, 10).join('. ')}.\\n\\n`;\r\n      template += `## Future Prospects\\n\\nThe research team stated that they will continue to study this issue in depth, further exploring the relationship between ${keywords.slice(1, 3).join(' and ')}.\\n\\n`;\r\n    }\r\n    \r\n    template += `*Note: This content is generated offline by the system for reference only. Due to network issues, the complete conversion result cannot be obtained.*`;\r\n  } else if (style === 'blog') {\r\n    // Blog style in English\r\n    template = `# A New Perspective on ${keywords[0]}: ${title.length > 15 ? title.substring(0, 15) + '...' : title}\\n\\n`;\r\n    template += `Recently, a study on ${keywords.slice(0, 3).join(', ')} caught my attention. ${sentences.slice(0, 3).join('. ')}.\\n\\n`;\r\n    \r\n    if (resultLength !== 'short') {\r\n      template += `## Why This Matters\\n\\n${sentences.slice(3, 6).join('. ')}. These findings are significant for understanding ${keywords[0]}.\\n\\n`;\r\n    }\r\n    \r\n    if (resultLength === 'long') {\r\n      template += `## In-Depth Analysis\\n\\nIf we analyze this research carefully, we can identify several key points:\\n\\n- There is a close connection between ${keywords[0]} and ${keywords[1]}\\n- The research method is novel, using an innovative analytical framework\\n- The results provide new insights for the field of ${keywords[2]}\\n\\n`;\r\n      template += `## My Take\\n\\nPersonally, I believe that while this research is valuable, there is still room for improvement. Future research could explore more deeply the relationship between ${keywords.slice(3, 5).join(' and ')}.\\n\\n`;\r\n    }\r\n    \r\n    template += `*Note: This content is generated offline by the system for reference only. Due to network issues, the complete conversion result cannot be obtained.*`;\r\n  } else {\r\n    // Summary in English\r\n    template = `# Summary of ${title}\\n\\n`;\r\n    template += `**Core Concepts**: ${keywords.slice(0, 5).join(', ')}\\n\\n`;\r\n    template += `${sentences.slice(0, 3).join('. ')}.\\n\\n`;\r\n    \r\n    if (resultLength !== 'short') {\r\n      template += `## Main Content\\n\\n${sentences.slice(3, 8).join('. ')}.\\n\\n`;\r\n    }\r\n    \r\n    if (resultLength === 'long') {\r\n      template += `## Research Conclusions\\n\\nBased on the above content, the study draws the following conclusions:\\n\\n- New findings about ${keywords[0]}\\n- The relationship between ${keywords[1]} and ${keywords[2]}\\n- Validation of theories regarding ${keywords[3]}\\n\\n`;\r\n    }\r\n    \r\n    template += `*Note: This content is generated offline by the system for reference only. Due to network issues, the complete conversion result cannot be obtained.*`;\r\n  }\r\n  \r\n  return template;\r\n};\r\n\r\n/**\r\n * Markdown渲染函数\r\n * @param {string} text Markdown文本\r\n * @returns {string} 渲染后的HTML\r\n */\r\nexport const renderMarkdown = (text) => {\r\n  if (!text) return '';\r\n  \r\n  return text\r\n    .replace(/^# (.*$)/gim, '<h1 class=\"text-2xl font-bold mb-4 mt-6\">$1</h1>')\r\n    .replace(/^## (.*$)/gim, '<h2 class=\"text-xl font-bold mb-3 mt-5\">$1</h2>')\r\n    .replace(/^### (.*$)/gim, '<h3 class=\"text-lg font-bold mb-2 mt-4\">$1</h3>')\r\n    .replace(/\\*\\*(.*)\\*\\*/gim, '<strong>$1</strong>')\r\n    .replace(/\\*(.*)\\*/gim, '<em>$1</em>')\r\n    .replace(/^> (.*$)/gim, '<blockquote class=\"border-l-4 border-gray-200 dark:border-gray-700 pl-4 py-2 my-3 text-gray-600 dark:text-gray-300 italic\">$1</blockquote>')\r\n    // 有序列表\r\n    .replace(/^(\\d+)\\. (.*$)/gim, '<div class=\"ml-5 list-decimal\"><li>$2</li></div>')\r\n    // 无序列表\r\n    .replace(/^- (.*$)/gim, '<div class=\"ml-5 list-disc\"><li>$1</li></div>')\r\n    // 代码块\r\n    .replace(/```([\\s\\S]*?)```/gim, '<pre class=\"bg-gray-100 dark:bg-gray-800 p-3 rounded-md my-3 overflow-x-auto\"><code>$1</code></pre>')\r\n    // 链接\r\n    .replace(/\\[(.*?)\\]\\((.*?)\\)/gim, '<a href=\"$2\" class=\"text-blue-600 dark:text-blue-400 hover:underline\" target=\"_blank\">$1</a>')\r\n    // 段落\r\n    .replace(/\\n\\n/gim, '</p><p class=\"my-2\">')\r\n    .replace(/\\n/gim, '<br />');\r\n}; "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 285, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/genreshift-web/app/utils/localStorageManager.js"],"sourcesContent":["'use client';\r\n\r\n// 本地存储键名称常量\r\nconst STORAGE_KEYS = {\r\n  HISTORY: 'genreshift-history',\r\n  USER_SETTINGS: 'genreshift-settings',\r\n  THEME: 'theme',\r\n  API_USAGE: 'genreshift-api-usage',\r\n  RECENT_FILES: 'genreshift-recent-files'\r\n};\r\n\r\n/**\r\n * 统一的错误处理函数\r\n * @param {string} functionName 函数名称\r\n * @param {Error} error 错误对象\r\n * @param {*} defaultValue 默认返回值\r\n * @returns {*} 默认返回值\r\n */\r\nconst handleError = (functionName, error, defaultValue) => {\r\n  console.error(`[LocalStorageManager] ${functionName} 失败:`, error);\r\n  return defaultValue;\r\n};\r\n\r\n/**\r\n * 判断当前环境是否为浏览器\r\n * @returns {boolean} 是否为浏览器环境\r\n */\r\nconst isBrowser = () => typeof window !== 'undefined';\r\n\r\n/**\r\n * 添加或更新历史记录\r\n * @param {Object} item 历史记录项目\r\n * @returns {string|null} 记录ID或null（失败时）\r\n */\r\nexport const saveToHistory = (item) => {\r\n  if (!isBrowser()) return null;\r\n  \r\n  try {\r\n    // 确保必需字段存在\r\n    if (!item.title || !item.content) {\r\n      console.error('[LocalStorageManager] 保存历史记录失败：标题或内容缺失');\r\n      return null;\r\n    }\r\n    \r\n    // 创建唯一ID\r\n    const id = item.id || `hist-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n    \r\n    // 获取现有历史记录\r\n    const historyItems = getHistoryItems();\r\n    \r\n    // 准备新记录\r\n    const newItem = {\r\n      id,\r\n      title: item.title,\r\n      originalFileName: item.originalFileName || '未命名文件',\r\n      date: item.date || new Date().toISOString().slice(0, 10),\r\n      outputStyle: item.outputStyle || 'summary',\r\n      previewText: item.content.substring(0, 150) + '...',\r\n      content: item.content,\r\n      tags: item.tags || [],\r\n    };\r\n    \r\n    // 检查是否存在相同ID的记录，如果存在则更新，否则添加新记录\r\n    const existingIndex = historyItems.findIndex(hist => hist.id === id);\r\n    if (existingIndex >= 0) {\r\n      historyItems[existingIndex] = newItem;\r\n    } else {\r\n      historyItems.unshift(newItem); // 添加到最前面\r\n    }\r\n    \r\n    // 获取用户设置的最大历史记录数量，默认为50\r\n    const settings = getUserSettings();\r\n    const maxHistoryItems = settings.preferences?.maxHistoryItems || 50;\r\n    \r\n    // 限制存储数量\r\n    const limitedItems = historyItems.slice(0, maxHistoryItems);\r\n    \r\n    // 保存到本地存储\r\n    localStorage.setItem(STORAGE_KEYS.HISTORY, JSON.stringify(limitedItems));\r\n    \r\n    return id;\r\n  } catch (error) {\r\n    return handleError('saveToHistory', error, null);\r\n  }\r\n};\r\n\r\n/**\r\n * 获取所有历史记录\r\n * @returns {Array} 历史记录数组\r\n */\r\nexport const getHistoryItems = () => {\r\n  if (!isBrowser()) return [];\r\n  \r\n  try {\r\n    const historyData = localStorage.getItem(STORAGE_KEYS.HISTORY);\r\n    return historyData ? JSON.parse(historyData) : [];\r\n  } catch (error) {\r\n    return handleError('getHistoryItems', error, []);\r\n  }\r\n};\r\n\r\n/**\r\n * 获取单个历史记录\r\n * @param {string} id 记录ID\r\n * @returns {Object|null} 历史记录对象或null\r\n */\r\nexport const getHistoryItem = (id) => {\r\n  if (!isBrowser()) return null;\r\n  \r\n  try {\r\n    const historyItems = getHistoryItems();\r\n    return historyItems.find(item => item.id === id) || null;\r\n  } catch (error) {\r\n    return handleError('getHistoryItem', error, null);\r\n  }\r\n};\r\n\r\n/**\r\n * 删除单个历史记录\r\n * @param {string} id 记录ID\r\n * @returns {boolean} 删除是否成功\r\n */\r\nexport const deleteHistoryItem = (id) => {\r\n  if (!isBrowser()) return false;\r\n  \r\n  try {\r\n    let historyItems = getHistoryItems();\r\n    const initialLength = historyItems.length;\r\n    \r\n    historyItems = historyItems.filter(item => item.id !== id);\r\n    \r\n    if (historyItems.length !== initialLength) {\r\n      localStorage.setItem(STORAGE_KEYS.HISTORY, JSON.stringify(historyItems));\r\n      return true;\r\n    }\r\n    return false;\r\n  } catch (error) {\r\n    return handleError('deleteHistoryItem', error, false);\r\n  }\r\n};\r\n\r\n/**\r\n * 删除多个历史记录\r\n * @param {Array} ids 记录ID数组\r\n * @returns {number} 成功删除的数量\r\n */\r\nexport const deleteHistoryItems = (ids) => {\r\n  if (!isBrowser()) return 0;\r\n  if (!ids || !ids.length) return 0;\r\n  \r\n  try {\r\n    let historyItems = getHistoryItems();\r\n    const initialLength = historyItems.length;\r\n    \r\n    historyItems = historyItems.filter(item => !ids.includes(item.id));\r\n    \r\n    const deletedCount = initialLength - historyItems.length;\r\n    localStorage.setItem(STORAGE_KEYS.HISTORY, JSON.stringify(historyItems));\r\n    \r\n    return deletedCount;\r\n  } catch (error) {\r\n    return handleError('deleteHistoryItems', error, 0);\r\n  }\r\n};\r\n\r\n/**\r\n * 清空所有历史记录\r\n * @returns {boolean} 清空是否成功\r\n */\r\nexport const clearAllHistory = () => {\r\n  if (!isBrowser()) return false;\r\n  \r\n  try {\r\n    localStorage.removeItem(STORAGE_KEYS.HISTORY);\r\n    return true;\r\n  } catch (error) {\r\n    return handleError('clearAllHistory', error, false);\r\n  }\r\n};\r\n\r\n/**\r\n * 保存用户设置\r\n * @param {Object} settings 设置对象\r\n * @returns {boolean} 保存是否成功\r\n */\r\nexport const saveUserSettings = (settings) => {\r\n  if (!isBrowser()) return false;\r\n  \r\n  try {\r\n    // 获取现有设置\r\n    const currentSettings = getUserSettings();\r\n    \r\n    // 合并新设置\r\n    const updatedSettings = { ...currentSettings, ...settings };\r\n    \r\n    // 保存到本地存储\r\n    localStorage.setItem(STORAGE_KEYS.USER_SETTINGS, JSON.stringify(updatedSettings));\r\n    return true;\r\n  } catch (error) {\r\n    return handleError('saveUserSettings', error, false);\r\n  }\r\n};\r\n\r\n/**\r\n * 获取用户设置\r\n * @returns {Object} 用户设置对象\r\n */\r\nexport const getUserSettings = () => {\r\n  if (!isBrowser()) {\r\n    return getDefaultSettings();\r\n  }\r\n  \r\n  try {\r\n    const settingsData = localStorage.getItem(STORAGE_KEYS.USER_SETTINGS);\r\n    \r\n    // 如果找不到设置或解析失败，返回默认设置\r\n    if (!settingsData) {\r\n      return getDefaultSettings();\r\n    }\r\n    \r\n    return { ...getDefaultSettings(), ...JSON.parse(settingsData) };\r\n  } catch (error) {\r\n    return handleError('getUserSettings', error, getDefaultSettings());\r\n  }\r\n};\r\n\r\n/**\r\n * 获取默认设置\r\n * @returns {Object} 默认设置对象\r\n */\r\nexport const getDefaultSettings = () => {\r\n  return {\r\n    userInfo: {\r\n      name: '用户',\r\n      email: '',\r\n    },\r\n    preferences: {\r\n      defaultOutputStyle: 'news',\r\n      defaultLength: 'medium',\r\n      defaultFocus: 'general',\r\n      defaultLanguage: 'zh',\r\n      apiModel: 'qwen-turbo',\r\n      maxHistoryItems: 50,\r\n    },\r\n    saveHistory: true,\r\n    darkMode: false,\r\n    joinDate: new Date().toISOString().slice(0, 10),\r\n  };\r\n};\r\n\r\n/**\r\n * 获取主题模式（暗色/亮色）\r\n * @returns {boolean} 是否为暗色模式\r\n */\r\nexport const getDarkMode = () => {\r\n  if (!isBrowser()) return false;\r\n  \r\n  try {\r\n    return localStorage.getItem(STORAGE_KEYS.THEME) === 'dark';\r\n  } catch (error) {\r\n    return handleError('getDarkMode', error, false);\r\n  }\r\n};\r\n\r\n/**\r\n * 设置主题模式（暗色/亮色）\r\n * @param {boolean} isDark 是否为暗色模式\r\n * @returns {boolean} 设置是否成功\r\n */\r\nexport const setDarkMode = (isDark) => {\r\n  if (!isBrowser()) return false;\r\n  \r\n  try {\r\n    localStorage.setItem(STORAGE_KEYS.THEME, isDark ? 'dark' : 'light');\r\n    document.documentElement.classList.toggle('dark', isDark);\r\n    return true;\r\n  } catch (error) {\r\n    return handleError('setDarkMode', error, false);\r\n  }\r\n};\r\n\r\n/**\r\n * 获取API使用统计\r\n * @returns {Object} API使用统计对象\r\n */\r\nexport const getApiUsage = () => {\r\n  if (!isBrowser()) return { count: 0, lastReset: new Date().toISOString() };\r\n  \r\n  try {\r\n    const data = localStorage.getItem(STORAGE_KEYS.API_USAGE);\r\n    if (!data) {\r\n      const defaultData = { count: 0, lastReset: new Date().toISOString() };\r\n      localStorage.setItem(STORAGE_KEYS.API_USAGE, JSON.stringify(defaultData));\r\n      return defaultData;\r\n    }\r\n    return JSON.parse(data);\r\n  } catch (error) {\r\n    return handleError('getApiUsage', error, { count: 0, lastReset: new Date().toISOString() });\r\n  }\r\n};\r\n\r\n/**\r\n * 增加API使用次数\r\n * @returns {Object} 更新后的API使用统计\r\n */\r\nexport const incrementApiUsage = () => {\r\n  if (!isBrowser()) return { count: 0, lastReset: new Date().toISOString() };\r\n  \r\n  try {\r\n    const usage = getApiUsage();\r\n    usage.count += 1;\r\n    localStorage.setItem(STORAGE_KEYS.API_USAGE, JSON.stringify(usage));\r\n    return usage;\r\n  } catch (error) {\r\n    return handleError('incrementApiUsage', error, { count: 0, lastReset: new Date().toISOString() });\r\n  }\r\n};\r\n\r\n/**\r\n * 重置API使用统计\r\n * @returns {Object} 重置后的API使用统计\r\n */\r\nexport const resetApiUsage = () => {\r\n  if (!isBrowser()) return { count: 0, lastReset: new Date().toISOString() };\r\n  \r\n  try {\r\n    const resetData = { count: 0, lastReset: new Date().toISOString() };\r\n    localStorage.setItem(STORAGE_KEYS.API_USAGE, JSON.stringify(resetData));\r\n    return resetData;\r\n  } catch (error) {\r\n    return handleError('resetApiUsage', error, { count: 0, lastReset: new Date().toISOString() });\r\n  }\r\n};\r\n\r\n/**\r\n * 获取最近使用的文件列表\r\n * @returns {Array} 文件列表\r\n */\r\nexport const getRecentFiles = () => {\r\n  if (!isBrowser()) return [];\r\n  \r\n  try {\r\n    const data = localStorage.getItem(STORAGE_KEYS.RECENT_FILES);\r\n    return data ? JSON.parse(data) : [];\r\n  } catch (error) {\r\n    return handleError('getRecentFiles', error, []);\r\n  }\r\n};\r\n\r\n/**\r\n * 添加最近使用的文件\r\n * @param {Object} file 文件对象，包含name, size, type等信息\r\n * @returns {Array} 更新后的文件列表\r\n */\r\nexport const addRecentFile = (file) => {\r\n  if (!isBrowser()) return [];\r\n  if (!file || !file.name) return getRecentFiles();\r\n  \r\n  try {\r\n    const files = getRecentFiles();\r\n    \r\n    // 创建新的文件记录\r\n    const newFile = {\r\n      name: file.name,\r\n      size: file.size || 0,\r\n      type: file.type || 'unknown',\r\n      lastUsed: new Date().toISOString()\r\n    };\r\n    \r\n    // 检查是否已经存在同名文件，如果存在则更新\r\n    const existingIndex = files.findIndex(f => f.name === file.name);\r\n    if (existingIndex >= 0) {\r\n      files[existingIndex] = newFile;\r\n    } else {\r\n      files.unshift(newFile);\r\n    }\r\n    \r\n    // 只保留最近的10个文件\r\n    const limitedFiles = files.slice(0, 10);\r\n    \r\n    localStorage.setItem(STORAGE_KEYS.RECENT_FILES, JSON.stringify(limitedFiles));\r\n    return limitedFiles;\r\n  } catch (error) {\r\n    return handleError('addRecentFile', error, getRecentFiles());\r\n  }\r\n};\r\n\r\n/**\r\n * 保存历史记录\r\n * @param {Object} record 历史记录对象\r\n * @returns {boolean} 保存是否成功\r\n */\r\nexport const saveToHistoryRecord = (record) => {\r\n  if (!isBrowser()) return false;\r\n  \r\n  try {\r\n    // 确保必需字段存在\r\n    if (!record.title || !record.content) {\r\n      console.error('[LocalStorageManager] 保存历史记录失败：标题或内容缺失');\r\n      return false;\r\n    }\r\n    \r\n    // 创建唯一ID\r\n    const id = record.id || `hist-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;\r\n    \r\n    // 获取现有历史记录\r\n    const historyItems = getHistoryItems();\r\n    \r\n    // 准备新记录\r\n    const newItem = {\r\n      id,\r\n      title: record.title,\r\n      originalFileName: record.originalFileName || '未命名文件',\r\n      date: record.date || new Date().toISOString().slice(0, 10),\r\n      outputStyle: record.outputStyle || 'summary',\r\n      previewText: record.content.substring(0, 150) + '...',\r\n      content: record.content,\r\n      tags: record.tags || [],\r\n    };\r\n    \r\n    // 检查是否存在相同ID的记录，如果存在则更新，否则添加新记录\r\n    const existingIndex = historyItems.findIndex(hist => hist.id === id);\r\n    if (existingIndex >= 0) {\r\n      historyItems[existingIndex] = newItem;\r\n    } else {\r\n      historyItems.unshift(newItem); // 添加到最前面\r\n    }\r\n    \r\n    // 获取用户设置的最大历史记录数量，默认为50\r\n    const settings = getUserSettings();\r\n    const maxHistoryItems = settings.preferences?.maxHistoryItems || 50;\r\n    \r\n    // 限制存储数量\r\n    const limitedItems = historyItems.slice(0, maxHistoryItems);\r\n    \r\n    // 保存到本地存储\r\n    localStorage.setItem(STORAGE_KEYS.HISTORY, JSON.stringify(limitedItems));\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    return handleError('saveToHistoryRecord', error, false);\r\n  }\r\n};\r\n\r\n// 导出所有功能\r\nexport default {\r\n  saveToHistory,\r\n  getHistoryItems,\r\n  getHistoryItem,\r\n  deleteHistoryItem,\r\n  deleteHistoryItems,\r\n  clearAllHistory,\r\n  saveUserSettings,\r\n  getUserSettings,\r\n  getDefaultSettings,\r\n  getDarkMode,\r\n  setDarkMode,\r\n  getApiUsage,\r\n  incrementApiUsage,\r\n  resetApiUsage,\r\n  getRecentFiles,\r\n  addRecentFile,\r\n  saveToHistoryRecord\r\n}; "],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAEA,YAAY;AACZ,MAAM,eAAe;IACnB,SAAS;IACT,eAAe;IACf,OAAO;IACP,WAAW;IACX,cAAc;AAChB;AAEA;;;;;;CAMC,GACD,MAAM,cAAc,CAAC,cAAc,OAAO;IACxC,QAAQ,KAAK,CAAC,CAAC,sBAAsB,EAAE,aAAa,IAAI,CAAC,EAAE;IAC3D,OAAO;AACT;AAEA;;;CAGC,GACD,MAAM,YAAY,IAAM,gBAAkB;AAOnC,MAAM,gBAAgB,CAAC;IAC5B,IAAI,CAAC,aAAa,OAAO;;AAiD3B;AAMO,MAAM,kBAAkB;IAC7B,IAAI,CAAC,aAAa,OAAO,EAAE;;AAQ7B;AAOO,MAAM,iBAAiB,CAAC;IAC7B,IAAI,CAAC,aAAa,OAAO;;AAQ3B;AAOO,MAAM,oBAAoB,CAAC;IAChC,IAAI,CAAC,aAAa,OAAO;;AAgB3B;AAOO,MAAM,qBAAqB,CAAC;IACjC,IAAI,CAAC,aAAa,OAAO;;AAgB3B;AAMO,MAAM,kBAAkB;IAC7B,IAAI,CAAC,aAAa,OAAO;;AAQ3B;AAOO,MAAM,mBAAmB,CAAC;IAC/B,IAAI,CAAC,aAAa,OAAO;;AAe3B;AAMO,MAAM,kBAAkB;IAC7B,IAAI,CAAC,aAAa;QAChB,OAAO;IACT;;AAcF;AAMO,MAAM,qBAAqB;IAChC,OAAO;QACL,UAAU;YACR,MAAM;YACN,OAAO;QACT;QACA,aAAa;YACX,oBAAoB;YACpB,eAAe;YACf,cAAc;YACd,iBAAiB;YACjB,UAAU;YACV,iBAAiB;QACnB;QACA,aAAa;QACb,UAAU;QACV,UAAU,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,GAAG;IAC9C;AACF;AAMO,MAAM,cAAc;IACzB,IAAI,CAAC,aAAa,OAAO;;AAO3B;AAOO,MAAM,cAAc,CAAC;IAC1B,IAAI,CAAC,aAAa,OAAO;;AAS3B;AAMO,MAAM,cAAc;IACzB,IAAI,CAAC,aAAa,OAAO;QAAE,OAAO;QAAG,WAAW,IAAI,OAAO,WAAW;IAAG;;AAa3E;AAMO,MAAM,oBAAoB;IAC/B,IAAI,CAAC,aAAa,OAAO;QAAE,OAAO;QAAG,WAAW,IAAI,OAAO,WAAW;IAAG;;AAU3E;AAMO,MAAM,gBAAgB;IAC3B,IAAI,CAAC,aAAa,OAAO;QAAE,OAAO;QAAG,WAAW,IAAI,OAAO,WAAW;IAAG;;AAS3E;AAMO,MAAM,iBAAiB;IAC5B,IAAI,CAAC,aAAa,OAAO,EAAE;;AAQ7B;AAOO,MAAM,gBAAgB,CAAC;IAC5B,IAAI,CAAC,aAAa,OAAO,EAAE;;AA8B7B;AAOO,MAAM,sBAAsB,CAAC;IAClC,IAAI,CAAC,aAAa,OAAO;;AAiD3B;uCAGe;IACb;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;AACF","debugId":null}},
    {"offset": {"line": 447, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/genreshift-web/app/workspace/page.js"],"sourcesContent":["'use client';\n\nimport { useState, useCallback, useRef, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport Link from 'next/link';\nimport Image from 'next/image';\nimport { useDropzone } from 'react-dropzone';\nimport axios from 'axios';\nimport mammoth from 'mammoth';\n// import * as pdfjsLib from 'pdfjs-dist';\nimport { renderMarkdown, generateOfflineContent } from '../utils/offlineSupport';\nimport { saveToHistory, getDarkMode, setDarkMode } from '../utils/localStorageManager';\n\nexport default function Workspace() {\n  // 状态管理\n  const [file, setFile] = useState(null);\n  const [fileContent, setFileContent] = useState('');\n  const [convertedText, setConvertedText] = useState('');\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [processingProgress, setProcessingProgress] = useState(0);\n  const [isParameterPanelOpen, setIsParameterPanelOpen] = useState(true);\n  const [showOriginal, setShowOriginal] = useState(true);\n  const [error, setError] = useState(null);\n  const [copied, setCopied] = useState(false);\n  // 添加网络状态检测\n  const [isOnline, setIsOnline] = useState(true);\n  // 添加后备模式状态\n  const [fallbackMode, setFallbackMode] = useState(false);\n  const [warning, setWarning] = useState(null);\n  // 在状态变量中添加分段处理相关的状态\n  const [processingSegments, setProcessingSegments] = useState(0);\n  const [totalSegments, setTotalSegments] = useState(0);\n  const [currentSegment, setCurrentSegment] = useState(0);\n  \n  // 检查网络状态\n  useEffect(() => {\n    setIsOnline(navigator.onLine);\n    \n    const handleOnline = () => setIsOnline(true);\n    const handleOffline = () => setIsOnline(false);\n    \n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n    \n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, []);\n  \n  // 转换参数\n  const [parameters, setParameters] = useState({\n    outputStyle: 'news', // news, blog, summary\n    length: 'medium', // short, medium, long\n    focus: 'general', // general, methodology, results, implications\n    language: 'zh', // zh, en\n  });\n\n    // 深色模式状态 - 修改使用 localStorage\n    const [darkMode, setDarkModeState] = useState(false);\n\n    // 初始化时读取本地存储的深色模式设置\n    useEffect(() => {\n      if (typeof window !== 'undefined') {\n        const savedMode = getDarkMode();\n        setDarkModeState(savedMode);\n        document.documentElement.classList.toggle('dark', savedMode);\n      }\n    }, []);\n  \n    // 切换深色模式\n    const toggleDarkMode = () => {\n      const newMode = !darkMode;\n      setDarkModeState(newMode);\n      setDarkMode(newMode);\n    };\n  \n    // 加载PDF.js\n    useEffect(() => {\n      if (typeof window !== 'undefined' && !window.pdfjsLib) {\n        const scriptPdf = document.createElement('script');\n        scriptPdf.src = 'https://cdn.jsdelivr.net/npm/pdfjs-dist@2.10.377/build/pdf.min.js';\n        scriptPdf.async = true;\n        \n        scriptPdf.onload = () => {\n          window.pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdn.jsdelivr.net/npm/pdfjs-dist@2.10.377/build/pdf.worker.min.js';\n        };\n        \n        document.body.appendChild(scriptPdf);\n      }\n    }, []);\n\n\n      // 处理PDF文件\n  const processPdfFile = (selectedFile) => {\n    if (!selectedFile) return;\n    \n    const reader = new FileReader();\n    setFile(selectedFile);\n    \n    reader.onload = async function() {\n      try {\n        // 确保PDF.js已加载\n        if (!window.pdfjsLib) {\n          throw new Error(\"PDF.js库尚未加载，请稍后再试\");\n        }\n        \n        const typedArray = new Uint8Array(reader.result);\n        const pdf = await window.pdfjsLib.getDocument({ data: typedArray }).promise;\n        let fullText = '';\n        \n        for (let i = 1; i <= pdf.numPages; i++) {\n          const page = await pdf.getPage(i);\n          const textContent = await page.getTextContent();\n          const pageText = textContent.items.map(item => item.str).join(' ');\n          fullText += pageText + '\\n\\n';\n        }\n        \n      // 限制内容长度，太长的内容会导致API超时\n      const maxContentLength = 25000; // 前端预处理，减少到25000字符\n        const content = fullText.substring(0, maxContentLength);\n        \n        if (fullText.length > maxContentLength) {\n        setWarning(`文件内容已被截断至${maxContentLength}字符以避免处理超时。仅处理前${maxContentLength}字符。`);\n      } else {\n        setWarning(null);\n      }\n        \n      setFileContent(content);\n        setIsProcessing(false);\n      } catch (error) {\n        console.error('PDF处理错误:', error);\n        // 回退到简单文本提取\n        try {\n          const text = new TextDecoder().decode(new Uint8Array(reader.result).slice(0, 1000000));\n          \n          // 限制内容长度\n          const maxContentLength = 25000;\n          const content = text.substring(0, maxContentLength);\n          \n          if (text.length > maxContentLength) {\n            setWarning(`文件内容已被截断至${maxContentLength}字符以避免处理超时。仅处理前${maxContentLength}字符。`);\n          } else {\n            setWarning(null);\n          }\n          \n          setFileContent(`PDF文件内容已提取（简单文本模式）：\\n\\n${content}`);\n        } catch (fallbackError) {\n          setFileContent(\"无法解析PDF文件。如果是扫描件或图片PDF，请尝试上传文本版本。\");\n        }\n        setIsProcessing(false);\n      }\n    };\n    \n    reader.onerror = () => {\n      setError(\"PDF文件读取失败\");\n      setIsProcessing(false);\n    };\n    \n    reader.readAsArrayBuffer(selectedFile);\n  };\n\n  // 拖放上传功能\n  const onDrop = useCallback(acceptedFiles => {\n    if (acceptedFiles && acceptedFiles.length > 0) {\n      const selectedFile = acceptedFiles[0];\n      \n      // 添加文件大小限制\n      const MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB\n      if (selectedFile.size > MAX_FILE_SIZE) {\n        setError(`文件过大，请上传小于10MB的文件`);\n        return;\n      }\n      \n      setFile(selectedFile);\n      setIsProcessing(true); // 开始处理\n      \n      // 根据文件类型使用不同的处理方法\n      if (selectedFile.type === 'application/pdf') {\n        processPdfFile(selectedFile);\n      } \n      else if (selectedFile.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {\n        // Word文件处理\n        const reader = new FileReader();\n        reader.onload = function() {\n          mammoth.extractRawText({arrayBuffer: reader.result})\n            .then(result => {\n              setFileContent(result.value);\n              setIsProcessing(false);\n            })\n            .catch(error => {\n              console.error('Word处理错误:', error);\n              setError(\"Word文件处理失败: \" + error.message);\n              setIsProcessing(false);\n            });\n        };\n        reader.onerror = () => {\n          setError(\"Word文件读取失败\");\n          setIsProcessing(false);\n        };\n        reader.readAsArrayBuffer(selectedFile);\n      }\n      else {\n        // 文本文件处理\n        processTextFile(selectedFile);\n      }\n      \n      setError(null);\n    }\n  }, []);\n  \n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ \n    onDrop,\n    accept: {\n      'application/pdf': ['.pdf'],\n      'text/plain': ['.txt'],\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document': ['.docx'],\n      'application/zip': ['.zip'],\n    }\n  });\n\n    // 处理参数更改\n    const handleParameterChange = (param, value) => {\n      setParameters(prev => ({\n        ...prev,\n        [param]: value\n      }));\n    };\n    \n    // 使用Markdown解析函数\n    const renderMarkdown = (text) => {\n      if (!text) return '';\n      \n      return text\n        .replace(/^# (.*$)/gim, '<h1 class=\"text-2xl font-bold mb-4 mt-6\">$1</h1>')\n        .replace(/^## (.*$)/gim, '<h2 class=\"text-xl font-bold mb-3 mt-5\">$1</h2>')\n        .replace(/^### (.*$)/gim, '<h3 class=\"text-lg font-bold mb-2 mt-4\">$1</h3>')\n        .replace(/\\*\\*(.*)\\*\\*/gim, '<strong>$1</strong>')\n        .replace(/\\*(.*)\\*/gim, '<em>$1</em>')\n        .replace(/^> (.*$)/gim, '<blockquote class=\"border-l-4 border-gray-200 dark:border-gray-700 pl-4 py-2 my-3 text-gray-600 dark:text-gray-300 italic\">$1</blockquote>')\n        // 有序列表\n        .replace(/^(\\d+)\\. (.*$)/gim, '<div class=\"ml-5 list-decimal\"><li>$2</li></div>')\n        // 无序列表\n        .replace(/^- (.*$)/gim, '<div class=\"ml-5 list-disc\"><li>$1</li></div>')\n        // 代码块\n        .replace(/```([\\s\\S]*?)```/gim, '<pre class=\"bg-gray-100 dark:bg-gray-800 p-3 rounded-md my-3 overflow-x-auto\"><code>$1</code></pre>')\n        // 链接\n        .replace(/\\[(.*?)\\]\\((.*?)\\)/gim, '<a href=\"$2\" class=\"text-blue-600 dark:text-blue-400 hover:underline\" target=\"_blank\">$1</a>')\n        // 段落\n        .replace(/\\n\\n/gim, '</p><p class=\"my-2\">')\n        .replace(/\\n/gim, '<br />');\n    };\n    \n    // 生成本地离线处理结果（当API不可用时）\n    const generateFallbackResult = () => {\n      if (!fileContent) return '';\n      \n      // 提取内容\n      const extractedContent = fileContent.substring(0, 1000);\n      const sentences = extractedContent.split(/[.!?。！？]+/).filter(s => s.trim().length > 0);\n      const keywords = extractCountKeywords(extractedContent);\n      \n      const language = parameters.language === 'zh' ? 'zh' : 'en';\n      const style = parameters.outputStyle;\n      const resultLength = parameters.length;\n      \n      if (language === 'zh') {\n        return generateChineseFallback(sentences, keywords, style, resultLength);\n      } else {\n        return generateEnglishFallback(sentences, keywords, style, resultLength);\n      }\n    };\n    \n    // 提取关键词和出现次数\n    const extractCountKeywords = (text) => {\n      // 简单的关键词提取\n      const words = text.toLowerCase().split(/\\s+|[,.;:\"'?!，。；：\"\"'？！]/);\n      const stopWords = new Set(['the', 'a', 'an', 'in', 'on', 'at', 'of', 'to', 'and', 'is', 'are', 'was', 'were', 'be', 'been', 'being', 'this', 'that', 'these', 'those', '的', '了', '和', '与', '是', '在', '有', '被']);\n      \n      // 统计词频\n      const wordCount = {};\n      words.forEach(word => {\n        if (word.length > 1 && !stopWords.has(word)) {\n          wordCount[word] = (wordCount[word] || 0) + 1;\n        }\n      });\n      \n      // 排序并返回前10个\n      return Object.entries(wordCount)\n        .sort((a, b) => b[1] - a[1])\n        .slice(0, 10)\n        .map(([word]) => word);\n    };\n    \n    // 生成中文后备内容\n    const generateChineseFallback = (sentences, keywords, style, resultLength) => {\n      // 提取标题\n      const title = sentences[0]?.trim() || '论文概述';\n      \n      // 根据风格选择模板\n      let template = '';\n      \n      if (style === 'news') {\n        template = `# ${title.length > 20 ? title.substring(0, 20) + '...' : title}\\n\\n`;\n        template += `**关键要点**: ${keywords.slice(0, 5).join('、')}\\n\\n`;\n        template += `${sentences.slice(0, 3).join('。')}。\\n\\n`;\n        \n        if (resultLength !== 'short') {\n          template += `## 研究背景\\n\\n${sentences.slice(3, 5).join('。')}。\\n\\n`;\n          template += `## 研究方法\\n\\n据研究团队介绍，他们采用了创新的研究方法进行分析。${sentences.slice(5, 7).join('。')}。\\n\\n`;\n        }\n        \n        if (resultLength === 'long') {\n          template += `## 研究意义\\n\\n这项研究对${keywords[0]}领域具有重要意义。${sentences.slice(7, 10).join('。')}。\\n\\n`;\n          template += `## 未来展望\\n\\n研究团队表示，未来将继续深入研究这一问题，进一步探索${keywords.slice(1, 3).join('和')}的关系。\\n\\n`;\n        }\n        \n        template += `*注：本内容由系统离线生成，仅作参考。由于网络原因，无法获取完整的转换结果。*`;\n      } else if (style === 'blog') {\n        template = `# 探索${keywords[0]}的新视角：${title.length > 15 ? title.substring(0, 15) + '...' : title}\\n\\n`;\n        template += `近期，一项关于${keywords.slice(0, 3).join('、')}的研究引起了我的注意。${sentences.slice(0, 3).join('。')}。\\n\\n`;\n        \n        if (resultLength !== 'short') {\n          template += `## 为什么这很重要？\\n\\n${sentences.slice(3, 6).join('。')}。这些发现对于理解${keywords[0]}具有重要意义。\\n\\n`;\n        }\n        \n        if (resultLength === 'long') {\n          template += `## 深入分析\\n\\n如果仔细分析这项研究，我们可以发现几个关键点：\\n\\n- ${keywords[0]}与${keywords[1]}之间存在密切关联\\n- 研究方法新颖，采用了创新的分析框架\\n- 结果对${keywords[2]}领域提供了新的思路\\n\\n`;\n          template += `## 我的看法\\n\\n个人认为，这项研究虽然有价值，但仍有改进空间。未来研究可以更深入地探索${keywords.slice(3, 5).join('和')}的关系。\\n\\n`;\n        }\n        \n        template += `*注：本内容由系统离线生成，仅作参考。由于网络原因，无法获取完整的转换结果。*`;\n      } else {\n        // 摘要\n        template = `# ${title}摘要\\n\\n`;\n        template += `**核心概念**: ${keywords.slice(0, 5).join('、')}\\n\\n`;\n        template += `${sentences.slice(0, 3).join('。')}。\\n\\n`;\n        \n        if (resultLength !== 'short') {\n          template += `## 主要内容\\n\\n${sentences.slice(3, 8).join('。')}。\\n\\n`;\n        }\n        \n        if (resultLength === 'long') {\n          template += `## 研究结论\\n\\n基于以上内容，研究得出以下结论：\\n\\n- 关于${keywords[0]}的新发现\\n- ${keywords[1]}与${keywords[2]}的关系\\n- 对${keywords[3]}理论的验证\\n\\n`;\n        }\n        \n        template += `*注：本内容由系统离线生成，仅作参考。由于网络原因，无法获取完整的转换结果。*`;\n      }\n      \n      return template;\n    };\n    \n    // 生成英文后备内容\n    const generateEnglishFallback = (sentences, keywords, style, resultLength) => {\n      // 类似的逻辑，但生成英文内容\n      // 提取标题\n      const title = sentences[0]?.trim() || 'Paper Overview';\n      \n      // 根据风格选择模板\n      let template = '';\n      \n      if (style === 'news') {\n        template = `# ${title.length > 20 ? title.substring(0, 20) + '...' : title}\\n\\n`;\n        template += `**Key Points**: ${keywords.slice(0, 5).join(', ')}\\n\\n`;\n        template += `${sentences.slice(0, 3).join('. ')}.\\n\\n`;\n        \n        if (resultLength !== 'short') {\n          template += `## Research Background\\n\\n${sentences.slice(3, 5).join('. ')}.\\n\\n`;\n          template += `## Methodology\\n\\nAccording to the research team, they employed innovative research methods for analysis. ${sentences.slice(5, 7).join('. ')}.\\n\\n`;\n        }\n        \n        if (resultLength === 'long') {\n          template += `## Significance\\n\\nThis research has important implications for the field of ${keywords[0]}. ${sentences.slice(7, 10).join('. ')}.\\n\\n`;\n          template += `## Future Prospects\\n\\nThe research team stated that they will continue to study this issue in depth, further exploring the relationship between ${keywords.slice(1, 3).join(' and ')}.\\n\\n`;\n        }\n        \n        template += `*Note: This content is generated offline by the system for reference only. Due to network issues, the complete conversion result cannot be obtained.*`;\n      } else if (style === 'blog') {\n        // Blog style in English\n        template = `# A New Perspective on ${keywords[0]}: ${title.length > 15 ? title.substring(0, 15) + '...' : title}\\n\\n`;\n        template += `Recently, a study on ${keywords.slice(0, 3).join(', ')} caught my attention. ${sentences.slice(0, 3).join('. ')}.\\n\\n`;\n        \n        if (resultLength !== 'short') {\n          template += `## Why This Matters\\n\\n${sentences.slice(3, 6).join('. ')}. These findings are significant for understanding ${keywords[0]}.\\n\\n`;\n        }\n        \n        if (resultLength === 'long') {\n          template += `## In-Depth Analysis\\n\\nIf we analyze this research carefully, we can identify several key points:\\n\\n- There is a close connection between ${keywords[0]} and ${keywords[1]}\\n- The research method is novel, using an innovative analytical framework\\n- The results provide new insights for the field of ${keywords[2]}\\n\\n`;\n          template += `## My Take\\n\\nPersonally, I believe that while this research is valuable, there is still room for improvement. Future research could explore more deeply the relationship between ${keywords.slice(3, 5).join(' and ')}.\\n\\n`;\n        }\n        \n        template += `*Note: This content is generated offline by the system for reference only. Due to network issues, the complete conversion result cannot be obtained.*`;\n      } else {\n        // Summary in English\n        template = `# Summary of ${title}\\n\\n`;\n        template += `**Core Concepts**: ${keywords.slice(0, 5).join(', ')}\\n\\n`;\n        template += `${sentences.slice(0, 3).join('. ')}.\\n\\n`;\n        \n        if (resultLength !== 'short') {\n          template += `## Main Content\\n\\n${sentences.slice(3, 8).join('. ')}.\\n\\n`;\n        }\n        \n        if (resultLength === 'long') {\n          template += `## Research Conclusions\\n\\nBased on the above content, the study draws the following conclusions:\\n\\n- New findings about ${keywords[0]}\\n- The relationship between ${keywords[1]} and ${keywords[2]}\\n- Validation of theories regarding ${keywords[3]}\\n\\n`;\n        }\n        \n        template += `*Note: This content is generated offline by the system for reference only. Due to network issues, the complete conversion result cannot be obtained.*`;\n      }\n      \n      return template;\n    };\n  \n    // 转换论文\n    const convertPaper = async (retryAttempt = 0) => {\n      if (!fileContent) {\n        setError(\"请先上传或输入论文内容\");\n        return;\n      }\n\n      setIsProcessing(true);\n      setProcessingProgress(0);\n      setError(null);\n      setProcessingSegments(0);\n      setTotalSegments(0);\n      setCurrentSegment(0);\n\n      // 检查内容长度\n      let processedContent = fileContent;\n      if (fileContent.length > 25000) {\n        setWarning(\"内容超过25000字符，将被截断处理\");\n        processedContent = fileContent.substring(0, 25000);\n      }\n\n      // 将内容分段\n      const segments = [];\n      const segmentSize = 2000;\n      for (let i = 0; i < processedContent.length; i += segmentSize) {\n        segments.push(processedContent.substring(i, i + segmentSize));\n      }\n\n      setTotalSegments(segments.length);\n      let allResults = [];\n\n      // 分段处理\n      for (let i = 0; i < segments.length; i++) {\n        setCurrentSegment(i);\n        setProcessingProgress((i / segments.length) * 100);\n\n        try {\n          const response = await axios.post('/api/transform', {\n            content: segments[i],\n            parameters: {\n              outputStyle: parameters.outputStyle,\n              length: parameters.length,\n              focus: parameters.focus,\n              language: parameters.language\n            }\n          });\n\n          if (response.data.error) {\n            throw new Error(response.data.error);\n          }\n\n          allResults.push(response.data.result);\n        } catch (error) {\n          console.error('处理段落时出错:', error);\n          setError(\n            <div>\n              <p>处理第 {i + 1} 段内容时出错: {error.message}</p>\n              <button \n                onClick={() => convertPaper(retryAttempt + 1)}\n                className=\"mt-2 px-3 py-1 bg-indigo-100 text-indigo-700 rounded-md text-sm hover:bg-indigo-200 transition\"\n              >\n                重试转换\n              </button>\n            </div>\n          );\n          setIsProcessing(false);\n          return;\n        }\n      }\n\n      // 合并所有结果\n      const finalResult = allResults.join('\\n\\n');\n      setConvertedText(finalResult);\n      setShowOriginal(false);\n      setIsProcessing(false);\n      setProcessingProgress(100);\n\n      // 保存到历史记录\n      if (file) {\n        saveToHistory({\n          title: file.name,\n          content: finalResult,\n          originalFileName: file.name,\n          outputStyle: parameters.outputStyle,\n          date: new Date().toISOString().slice(0, 10)\n        });\n      }\n    };\n  \n    // 复制结果到剪贴板\n    const copyToClipboard = () => {\n      navigator.clipboard.writeText(convertedText)\n        .then(() => {\n          setCopied(true);\n          setTimeout(() => setCopied(false), 2000);\n        })\n        .catch(err => {\n          console.error('复制失败:', err);\n        });\n    };\n  \n    // 加载状态指示器组件，添加更详细的信息\n    const LoadingIndicator = ({ text }) => (\n      <div className=\"absolute inset-0 bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm flex flex-col items-center justify-center z-10\">\n        <div className=\"w-20 h-20 border-4 border-indigo-200 dark:border-indigo-800 border-t-indigo-600 dark:border-t-indigo-400 rounded-full animate-spin\"></div>\n        <p className=\"mt-4 text-lg font-medium text-indigo-600 dark:text-indigo-400\">{text}</p>\n        {totalSegments > 0 && (\n          <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\n            正在处理第 {currentSegment + 1}/{totalSegments} 段内容\n          </p>\n        )}\n        <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400 max-w-md text-center\">\n          {processingProgress < 50 \n            ? \"正在处理您的文件，大型文件可能需要更长时间...\" \n            : processingProgress < 90 \n              ? \"正在生成易读内容，请耐心等待...\" \n              : \"正在优化输出格式，即将完成...\"}\n        </p>\n        <div className=\"mt-4 w-64 bg-gray-200 dark:bg-gray-700 rounded-full h-2.5\">\n          <div \n            className=\"bg-gradient-to-r from-indigo-600 to-blue-500 h-2.5 rounded-full transition-all duration-300\"\n            style={{ width: `${processingProgress}%` }}\n          />\n        </div>\n        <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">{Math.round(processingProgress)}%</p>\n      </div>\n    );\n\n    // 文本文件处理逻辑\n    const processTextFile = (selectedFile) => {\n      const reader = new FileReader();\n      reader.onload = () => {\n        // 限制内容长度\n        const maxContentLength = 25000;\n        const content = reader.result.substring(0, maxContentLength);\n        \n        if (reader.result.length > maxContentLength) {\n          setWarning(`文件内容已被截断至${maxContentLength}字符以避免处理超时。仅处理前${maxContentLength}字符。`);\n        } else {\n          setWarning(null);\n        }\n        \n        // 将内容分段\n        const segments = [];\n        const segmentSize = 2000;\n        for (let i = 0; i < content.length; i += segmentSize) {\n          segments.push(content.substring(i, i + segmentSize));\n        }\n        \n        setFileContent(content);\n        setTotalSegments(segments.length);\n        setIsProcessing(false);\n      };\n      reader.onerror = () => {\n        setError(\"文件读取失败\");\n        setIsProcessing(false);\n      };\n      reader.readAsText(selectedFile);\n    };\n\n    return (\n      <div className=\"min-h-screen bg-gradient-to-b from-blue-50 to-indigo-50 dark:from-gray-900 dark:to-gray-800\">\n        {/* 导航栏 */}\n        <nav className=\"sticky top-0 z-50 px-6 py-4 bg-white/90 dark:bg-gray-900/90 backdrop-blur-md border-b border-gray-100 dark:border-gray-800 shadow-sm\">\n          <div className=\"container mx-auto flex justify-between items-center\">\n            <Link href=\"/\" className=\"flex items-center\">\n              <span className=\"text-2xl font-bold bg-gradient-to-r from-indigo-500 to-blue-500 text-transparent bg-clip-text\">\n                GenreShift\n              </span>\n            </Link>\n            <div className=\"flex items-center space-x-4\">\n              {/* 深色模式切换按钮 */}\n              <button \n                onClick={toggleDarkMode}\n                className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition\"\n              >\n                {darkMode ? (\n                  <svg className=\"w-6 h-6 text-yellow-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707\"/>\n                  </svg>\n                ) : (\n                  <svg className=\"w-6 h-6 text-gray-600 dark:text-gray-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z\"/>\n                  </svg>\n                )}\n              </button>\n  \n              <Link href=\"/history\" className=\"text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400 transition\">\n                历史记录\n              </Link>\n              <div className=\"relative\">\n                <button className=\"w-10 h-10 rounded-full bg-indigo-100 dark:bg-indigo-900 flex items-center justify-center text-indigo-600 dark:text-indigo-300 hover:bg-indigo-200 dark:hover:bg-indigo-800 transition\">\n                  <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                  </svg>\n                </button>\n              </div>\n            </div>\n          </div>\n        </nav>\n        <div className=\"container mx-auto px-4 py-6 md:py-10\">\n        <h1 className=\"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6\">\n          论文转换工作台\n        </h1>\n        \n        {/* 主布局 - 在大屏幕上是左右两栏，在小屏幕上是上下布局 */}\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {/* 左侧操作区 */}\n          <div className=\"relative bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 h-[calc(100vh-240px)] md:min-h-[600px] flex flex-col\">\n            {/* 参数面板切换按钮 */}\n            <button \n              onClick={() => setIsParameterPanelOpen(!isParameterPanelOpen)}\n              className=\"absolute left-2 top-2 z-10 p-2 rounded-full bg-white dark:bg-gray-700 shadow-md hover:shadow-lg transition-all\"\n              aria-label={isParameterPanelOpen ? '关闭参数面板' : '打开参数面板'}\n            >\n              <svg \n                className={`w-5 h-5 text-indigo-600 dark:text-indigo-400 transition-transform duration-300 ${isParameterPanelOpen ? 'rotate-180' : ''}`}\n                fill=\"none\" \n                stroke=\"currentColor\" \n                viewBox=\"0 0 24 24\" \n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d={isParameterPanelOpen ? \"M15 19l-7-7 7-7\" : \"M9 5l7 7-7 7\"} />\n              </svg>\n            </button>\n            \n            {/* 参数设置面板 */}\n            <AnimatePresence>\n              {isParameterPanelOpen && (\n                <motion.div \n                  initial={{ opacity: 0, x: -20 }}\n                  animate={{ opacity: 1, x: 0 }}\n                  exit={{ opacity: 0, x: -20 }}\n                  className=\"mb-6 bg-indigo-50 dark:bg-gray-700/50 rounded-lg p-4\"\n                >\n                  <h3 className=\"text-lg font-medium text-gray-800 dark:text-gray-100 mb-3\">转换参数</h3>\n                  \n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                    {/* 输出风格 */}\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">输出风格</label>\n                      <div className=\"flex space-x-2\">\n                        {[\n                          { id: 'news', label: '新闻' },\n                          { id: 'blog', label: '博客' },\n                          { id: 'summary', label: '摘要' }\n                        ].map(option => (\n                          <button\n                            key={option.id}\n                            className={`px-3 py-1.5 rounded-md text-sm font-medium transition-all ${\n                              parameters.outputStyle === option.id \n                                ? 'bg-indigo-600 text-white shadow-md' \n                                : 'bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-500'\n                            }`}\n                            onClick={() => handleParameterChange('outputStyle', option.id)}\n                          >\n                            {option.label}\n                          </button>\n                        ))}\n                      </div>\n                    </div>\n                    {/* 输出长度 */}\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">输出长度</label>\n                      <div className=\"flex space-x-2\">\n                        {[\n                          { id: 'short', label: '简短' },\n                          { id: 'medium', label: '适中' },\n                          { id: 'long', label: '详细' }\n                        ].map(option => (\n                          <button\n                            key={option.id}\n                            className={`px-3 py-1.5 rounded-md text-sm font-medium transition-all ${\n                              parameters.length === option.id \n                                ? 'bg-indigo-600 text-white shadow-md' \n                                : 'bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-500'\n                            }`}\n                            onClick={() => handleParameterChange('length', option.id)}\n                          >\n                            {option.label}\n                          </button>\n                        ))}\n                      </div>\n                    </div>\n                    \n                    {/* 关注点 */}\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">内容关注点</label>\n                      <select\n                        value={parameters.focus}\n                        onChange={(e) => handleParameterChange('focus', e.target.value)}\n                        className=\"block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:text-gray-200\"\n                      >\n                        <option value=\"general\">综合内容</option>\n                        <option value=\"methodology\">研究方法</option>\n                        <option value=\"results\">研究结果</option>\n                        <option value=\"implications\">研究意义</option>\n                      </select>\n                    </div>\n                    \n                    {/* 输出语言 */}\n                    <div>\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">输出语言</label>\n                      <div className=\"flex space-x-2\">\n                        {[\n                          { id: 'zh', label: '中文' },\n                          { id: 'en', label: '英文' }\n                        ].map(option => (\n                          <button\n                            key={option.id}\n                            className={`px-3 py-1.5 rounded-md text-sm font-medium transition-all ${\n                              parameters.language === option.id \n                                ? 'bg-indigo-600 text-white shadow-md' \n                                : 'bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-500'\n                            }`}\n                            onClick={() => handleParameterChange('language', option.id)}\n                          >\n                            {option.label}\n                          </button>\n                        ))}\n                      </div>\n                    </div>\n                  </div>\n                </motion.div>\n              )}\n            </AnimatePresence>\n            {/* 文件上传区域 */}\n            <div className=\"flex-1 flex flex-col\">\n              <div\n                {...getRootProps()}\n                className={`flex-1 border-2 border-dashed rounded-xl flex flex-col items-center justify-center p-6 transition-all ${\n                  isDragActive ? 'border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20' : 'border-gray-300 dark:border-gray-600 hover:border-indigo-400 dark:hover:border-indigo-500'\n                } ${file ? 'bg-indigo-50 dark:bg-indigo-900/20' : ''}`}\n              >\n                <input {...getInputProps()} />\n                \n                {file ? (\n                  <div className=\"text-center\">\n                    <div className=\"w-16 h-16 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center mx-auto mb-4\">\n                      <svg className=\"w-8 h-8 text-indigo-600 dark:text-indigo-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                      </svg>\n                    </div>\n                    <h3 className=\"text-lg font-medium text-gray-800 dark:text-gray-100\">{file.name}</h3>\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\n                      {(file.size / 1024).toFixed(2)} KB · {file.type || '未知类型'}\n                    </p>\n                    <button \n                      onClick={(e) => {\n                        e.stopPropagation();\n                        setFile(null);\n                        setFileContent('');\n                      }}\n                      className=\"mt-4 px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-md text-sm hover:bg-red-200 dark:hover:bg-red-800/40 transition\"\n                    >\n                      删除文件\n                    </button>\n                  </div>\n                ) : (\n                  <>\n                    <div className=\"w-20 h-20 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center mb-4\">\n                      <svg className=\"w-10 h-10 text-indigo-600 dark:text-indigo-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\n                      </svg>\n                    </div>\n                    <h3 className=\"text-lg font-medium text-gray-800 dark:text-gray-100 text-center\">\n                      {isDragActive ? '释放文件以上传' : '拖放或点击上传论文'}\n                    </h3>\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-2 text-center\">\n                      支持 PDF(文本格式)、TXT、DOCX 和 ZIP 文件\n                      <br />\n                      <span className=\"text-xs\">注：扫描件或图片PDF可能无法正确提取文本</span>\n                    </p>\n                  </>\n                )}\n              </div>\n            </div>\n            {/* 错误提示 */}\n            {error && (\n              <div className=\"mt-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-lg text-sm\">\n                <p className=\"font-medium\">出错了</p>\n                {error}\n              </div>\n            )}\n            \n            {/* 警告提示 - 内容过长 */}\n            {warning && (\n              <div className=\"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300 rounded-lg text-sm\">\n                <p className=\"font-medium\">⚠️ 注意</p>\n                <p>{warning}</p>\n              </div>\n            )}\n            \n            {/* 操作按钮 */}\n            <div className=\"mt-6 flex justify-center\">\n              <button\n                onClick={convertPaper}\n                disabled={!file || isProcessing}\n                className={`px-6 py-3 rounded-xl font-medium text-white shadow-md transition-all transform ${\n                  !file || isProcessing \n                    ? 'bg-gray-400 dark:bg-gray-600 cursor-not-allowed' \n                    : 'bg-gradient-to-r from-indigo-600 to-blue-500 hover:from-indigo-700 hover:to-blue-600 hover:-translate-y-1 hover:shadow-lg'\n                }`}\n              >\n                {isProcessing ? '正在转换...' : '开始转换'}\n              </button>\n            </div>\n            \n            {/* 处理进度条 */}\n            {isProcessing && (\n              <LoadingIndicator text={\n                processingProgress < 50 \n                  ? \"正在处理您的文件，大型文件可能需要更长时间...\" \n                  : processingProgress < 90 \n                    ? \"正在生成易读内容，请耐心等待...\" \n                    : \"正在优化输出格式，即将完成...\"\n              } />\n            )}\n          </div>  \n          {/* 右侧结果展示区 */}\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden h-[calc(100vh-240px)] md:min-h-[600px] flex flex-col\">\n            {/* 选项卡切换 */}\n            <div className=\"flex border-b border-gray-200 dark:border-gray-700\">\n              <button\n                className={`flex-1 py-3 px-4 text-center font-medium text-sm transition-all ${\n                  showOriginal \n                    ? 'text-indigo-600 border-b-2 border-indigo-600' \n                    : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\n                }`}\n                onClick={() => setShowOriginal(true)}\n              >\n                原始论文\n              </button>\n              <button\n                className={`flex-1 py-3 px-4 text-center font-medium text-sm transition-all ${\n                  !showOriginal \n                    ? 'text-indigo-600 border-b-2 border-indigo-600' \n                    : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\n                }`}\n                onClick={() => setShowOriginal(false)}\n              >\n                转换结果\n              </button>\n            </div>\n            \n            {/* 内容区域 */}\n            <div className=\"flex-1 overflow-auto p-6\">\n              {showOriginal ? (\n                file ? (\n                  <div className=\"prose dark:prose-invert max-w-none\">\n                    <h2 className=\"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100\">{file.name}</h2>\n                    <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg whitespace-pre-wrap text-gray-800 dark:text-gray-200 h-[calc(100%-70px)] overflow-auto\">\n                      {fileContent || '正在加载内容...'}\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"h-full flex flex-col items-center justify-center text-gray-400 dark:text-gray-500\">\n                    <svg className=\"w-16 h-16 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z\" />\n                    </svg>\n                    <p className=\"text-lg\">转换后的内容将显示在这里</p>\n                  </div>\n                )\n              ) : (      \n                convertedText ? (\n                  <div className=\"relative\">\n                    <div className=\"prose prose-indigo dark:prose-invert max-w-none\">\n                      <div \n                        className=\"markdown-content\" \n                        dangerouslySetInnerHTML={{ \n                          __html: renderMarkdown(convertedText)\n                        }}\n                      />\n                    </div>\n                    \n                    {/* 操作按钮 */}\n                    <div className=\"flex justify-end mt-6 space-x-3\">\n                      <motion.button\n                        onClick={copyToClipboard}\n                        whileTap={{ scale: 0.95 }}\n                        className=\"px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg text-sm font-medium flex items-center transition\"\n                      >\n                        <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3\" />\n                        </svg>\n                        {copied ? '已复制' : '复制'}\n                      </motion.button>\n                      \n                      {!isOnline && (\n                        <motion.button\n                          onClick={() => {\n                            if (navigator.onLine) {\n                              convertPaper();\n                            } else {\n                              setError(<p>您当前处于离线状态，请连接网络后重试</p>);\n                            }\n                          }}\n                          whileTap={{ scale: 0.95 }}\n                          className=\"px-4 py-2 bg-green-100 dark:bg-green-900/30 hover:bg-green-200 dark:hover:bg-green-800/40 text-green-700 dark:text-green-300 rounded-lg text-sm font-medium flex items-center transition\"\n                        >\n                          <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\n                          </svg>\n                          重新尝试\n                        </motion.button>\n                      )}\n                      \n                      <motion.button\n                        whileTap={{ scale: 0.95 }}\n                        className=\"px-4 py-2 bg-indigo-100 dark:bg-indigo-900/30 hover:bg-indigo-200 dark:hover:bg-indigo-800/40 text-indigo-700 dark:text-indigo-300 rounded-lg text-sm font-medium flex items-center transition\"\n                      >\n                        <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z\" />\n                        </svg>\n                        分享\n                      </motion.button>\n                      \n                      <motion.button\n                        onClick={() => {\n                          if (convertedText) {\n                            saveToHistoryRecord();\n                          }\n                        }}\n                        whileTap={{ scale: 0.95 }}\n                        className=\"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-medium flex items-center transition\"\n                      >\n                        <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\n                        </svg>\n                        保存\n                      </motion.button>\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"h-full flex flex-col items-center justify-center text-gray-400 dark:text-gray-500\">\n                    <svg className=\"w-16 h-16 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z\" />\n                    </svg>\n                    <p className=\"text-lg\">转换后的内容将显示在这里</p>\n                  </div>\n                )\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* 加载状态 */}\n      {isProcessing && (\n        <LoadingIndicator text={\n          processingProgress < 50 \n            ? \"正在处理您的文件，大型文件可能需要更长时间...\" \n            : processingProgress < 90 \n              ? \"正在生成易读内容，请耐心等待...\" \n              : \"正在优化输出格式，即将完成...\"\n        } />\n      )}\n    </div>\n  );\n}\n        "],"names":[],"mappings":"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","debugId":null}}]
}