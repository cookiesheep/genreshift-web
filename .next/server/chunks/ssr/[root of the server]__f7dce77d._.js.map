{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/genreshift-web/app/utils/localStorage.js"],"sourcesContent":["/**\r\n * localStorage工具函数 - 用于管理历史记录、用户偏好设置和主题选择\r\n */\r\n\r\n// 常量定义\r\nconst HISTORY_KEY = 'genreshift_history';\r\nconst PREFERENCES_KEY = 'genreshift_preferences';\r\nconst THEME_KEY = 'genreshift_theme';\r\n\r\n// 默认值\r\nconst DEFAULT_PREFERENCES = {\r\n  defaultOutputStyle: 'news',\r\n  defaultLength: 'medium',\r\n  defaultFocus: 'general',\r\n  defaultLanguage: 'zh',\r\n  saveHistory: true,\r\n};\r\n\r\nconst DEFAULT_THEME = 'light';\r\n\r\n/**\r\n * 检查localStorage是否可用\r\n * @returns {boolean} localStorage是否可用\r\n */\r\nfunction isLocalStorageAvailable() {\r\n  try {\r\n    const test = '__storage_test__';\r\n    localStorage.setItem(test, test);\r\n    localStorage.removeItem(test);\r\n    return true;\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * 保存历史记录\r\n * @param {Object} record - 历史记录对象\r\n * @returns {boolean} 保存是否成功\r\n */\r\nexport function saveHistoryRecord(record) {\r\n  if (!isLocalStorageAvailable()) return false;\r\n  \r\n  try {\r\n    // 确保record具有必要的属性\r\n    if (!record.id || !record.date) {\r\n      record.id = record.id || Date.now().toString();\r\n      record.date = record.date || new Date().toISOString();\r\n    }\r\n    \r\n    const history = getHistoryRecords();\r\n    \r\n    // 检查是否已存在相同ID的记录\r\n    const existingIndex = history.findIndex(item => item.id === record.id);\r\n    if (existingIndex >= 0) {\r\n      // 更新现有记录\r\n      history[existingIndex] = { ...history[existingIndex], ...record };\r\n    } else {\r\n      // 添加新记录\r\n      history.push(record);\r\n    }\r\n    \r\n    localStorage.setItem(HISTORY_KEY, JSON.stringify(history));\r\n    return true;\r\n  } catch (error) {\r\n    console.error('保存历史记录失败:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * 获取所有历史记录\r\n * @returns {Array} 历史记录数组\r\n */\r\nexport function getHistoryRecords() {\r\n  if (!isLocalStorageAvailable()) return [];\r\n  \r\n  try {\r\n    const historyStr = localStorage.getItem(HISTORY_KEY);\r\n    return historyStr ? JSON.parse(historyStr) : [];\r\n  } catch (error) {\r\n    console.error('获取历史记录失败:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n * 获取单个历史记录\r\n * @param {string} id - 记录ID\r\n * @returns {Object|null} 历史记录对象或null\r\n */\r\nexport function getHistoryRecord(id) {\r\n  if (!isLocalStorageAvailable() || !id) return null;\r\n  \r\n  try {\r\n    const history = getHistoryRecords();\r\n    return history.find(item => item.id === id) || null;\r\n  } catch (error) {\r\n    console.error('获取单个历史记录失败:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * 删除历史记录\r\n * @param {string} id - 记录ID\r\n * @returns {boolean} 删除是否成功\r\n */\r\nexport function deleteHistoryRecord(id) {\r\n  if (!isLocalStorageAvailable() || !id) return false;\r\n  \r\n  try {\r\n    let history = getHistoryRecords();\r\n    history = history.filter(item => item.id !== id);\r\n    localStorage.setItem(HISTORY_KEY, JSON.stringify(history));\r\n    return true;\r\n  } catch (error) {\r\n    console.error('删除历史记录失败:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * 删除多个历史记录\r\n * @param {Array} ids - 记录ID数组\r\n * @returns {boolean} 删除是否成功\r\n */\r\nexport function deleteHistoryRecords(ids) {\r\n  if (!isLocalStorageAvailable() || !Array.isArray(ids) || ids.length === 0) return false;\r\n  \r\n  try {\r\n    let history = getHistoryRecords();\r\n    history = history.filter(item => !ids.includes(item.id));\r\n    localStorage.setItem(HISTORY_KEY, JSON.stringify(history));\r\n    return true;\r\n  } catch (error) {\r\n    console.error('删除多个历史记录失败:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * 清空所有历史记录\r\n * @returns {boolean} 清空是否成功\r\n */\r\nexport function clearAllHistory() {\r\n  if (!isLocalStorageAvailable()) return false;\r\n  \r\n  try {\r\n    localStorage.setItem(HISTORY_KEY, JSON.stringify([]));\r\n    return true;\r\n  } catch (error) {\r\n    console.error('清空历史记录失败:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * 保存用户偏好设置\r\n * @param {Object} preferences - 用户偏好设置对象\r\n * @returns {boolean} 保存是否成功\r\n */\r\nexport function saveUserPreferences(preferences) {\r\n  if (!isLocalStorageAvailable()) return false;\r\n  \r\n  try {\r\n    // 合并现有偏好设置\r\n    const currentPreferences = getUserPreferences();\r\n    const updatedPreferences = { ...currentPreferences, ...preferences };\r\n    localStorage.setItem(PREFERENCES_KEY, JSON.stringify(updatedPreferences));\r\n    return true;\r\n  } catch (error) {\r\n    console.error('保存用户偏好设置失败:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * 获取用户偏好设置\r\n * @returns {Object} 用户偏好设置对象\r\n */\r\nexport function getUserPreferences() {\r\n  if (!isLocalStorageAvailable()) return DEFAULT_PREFERENCES;\r\n  \r\n  try {\r\n    const preferencesStr = localStorage.getItem(PREFERENCES_KEY);\r\n    return preferencesStr \r\n      ? { ...DEFAULT_PREFERENCES, ...JSON.parse(preferencesStr) } \r\n      : DEFAULT_PREFERENCES;\r\n  } catch (error) {\r\n    console.error('获取用户偏好设置失败:', error);\r\n    return DEFAULT_PREFERENCES;\r\n  }\r\n}\r\n\r\n/**\r\n * 保存主题偏好\r\n * @param {string} theme - 主题名称 ('light' 或 'dark')\r\n * @returns {boolean} 保存是否成功\r\n */\r\nexport function saveThemePreference(theme) {\r\n  if (!isLocalStorageAvailable()) return false;\r\n  \r\n  try {\r\n    // 确保theme是有效值\r\n    const validTheme = theme === 'dark' ? 'dark' : 'light';\r\n    localStorage.setItem(THEME_KEY, validTheme);\r\n    \r\n    // 同步更新HTML元素类名以立即应用主题\r\n    if (typeof document !== 'undefined') {\r\n      if (validTheme === 'dark') {\r\n        document.documentElement.classList.add('dark');\r\n      } else {\r\n        document.documentElement.classList.remove('dark');\r\n      }\r\n    }\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error('保存主题偏好失败:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * 获取主题偏好\r\n * @returns {string} 主题名称 ('light' 或 'dark')\r\n */\r\nexport function getThemePreference() {\r\n  if (!isLocalStorageAvailable()) return DEFAULT_THEME;\r\n  \r\n  try {\r\n    const theme = localStorage.getItem(THEME_KEY);\r\n    return theme || DEFAULT_THEME;\r\n  } catch (error) {\r\n    console.error('获取主题偏好失败:', error);\r\n    return DEFAULT_THEME;\r\n  }\r\n}\r\n\r\n/**\r\n * 根据历史记录计算API使用统计\r\n * @returns {Object} API使用统计信息\r\n */\r\nexport function getApiUsageStats() {\r\n  if (!isLocalStorageAvailable()) {\r\n    return {\r\n      totalConverts: 0,\r\n      monthlyConverts: 0,\r\n      quota: {\r\n        limit: 100,\r\n        used: 0,\r\n        resetDate: getNextMonthDate(),\r\n      }\r\n    };\r\n  }\r\n  \r\n  try {\r\n    const history = getHistoryRecords();\r\n    const now = new Date();\r\n    const startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);\r\n    \r\n    // 计算本月转换次数\r\n    const monthlyConverts = history.filter(record => {\r\n      const recordDate = new Date(record.date);\r\n      return recordDate >= startOfMonth && recordDate <= now;\r\n    }).length;\r\n    \r\n    return {\r\n      totalConverts: history.length,\r\n      monthlyConverts,\r\n      quota: {\r\n        limit: 100, // 假设免费版每月限制100次转换\r\n        used: monthlyConverts,\r\n        resetDate: getNextMonthDate(),\r\n      }\r\n    };\r\n  } catch (error) {\r\n    console.error('计算API使用统计失败:', error);\r\n    return {\r\n      totalConverts: 0,\r\n      monthlyConverts: 0,\r\n      quota: {\r\n        limit: 100,\r\n        used: 0,\r\n        resetDate: getNextMonthDate(),\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * 获取下个月的日期字符串\r\n * @returns {string} 下个月的日期字符串，格式为YYYY-MM-DD\r\n */\r\nfunction getNextMonthDate() {\r\n  const now = new Date();\r\n  const nextMonth = new Date(now.getFullYear(), now.getMonth() + 1, 1);\r\n  \r\n  const year = nextMonth.getFullYear();\r\n  const month = (nextMonth.getMonth() + 1).toString().padStart(2, '0');\r\n  const day = nextMonth.getDate().toString().padStart(2, '0');\r\n  \r\n  return `${year}-${month}-${day}`;\r\n}\r\n\r\n/**\r\n * 检查是否接近配额限制\r\n * @returns {boolean} 是否接近配额限制\r\n */\r\nexport function isNearQuotaLimit() {\r\n  const { quota } = getApiUsageStats();\r\n  // 如果已使用超过配额的85%，则返回true\r\n  return quota.used > (quota.limit * 0.85);\r\n}\r\n\r\n/**\r\n * 初始化主题\r\n * 根据localStorage中存储的主题偏好来设置文档的class\r\n */\r\nexport function initializeTheme() {\r\n  if (typeof document !== 'undefined') {\r\n    const theme = getThemePreference();\r\n    if (theme === 'dark') {\r\n      document.documentElement.classList.add('dark');\r\n    } else {\r\n      document.documentElement.classList.remove('dark');\r\n    }\r\n  }\r\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 298, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/genreshift-web/app/components/Navbar.js"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport { usePathname } from 'next/navigation';\r\nimport { getThemePreference, saveThemePreference } from '../utils/localStorage';\r\n\r\nexport default function Navbar() {\r\n  const pathname = usePathname();\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n  const [isDarkMode, setIsDarkMode] = useState(false);\r\n  const [isScrolled, setIsScrolled] = useState(false);\r\n\r\n  // 初始化主题\r\n  useEffect(() => {\r\n    const theme = getThemePreference();\r\n    setIsDarkMode(theme === 'dark');\r\n    \r\n    // 添加滚动监听\r\n    const handleScroll = () => {\r\n      setIsScrolled(window.scrollY > 10);\r\n    };\r\n    \r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, []);\r\n  \r\n  // 切换深色模式\r\n  const toggleDarkMode = () => {\r\n    const newMode = !isDarkMode;\r\n    setIsDarkMode(newMode);\r\n    saveThemePreference(newMode ? 'dark' : 'light');\r\n  };\r\n  \r\n  // 检查当前路径是否活跃\r\n  const isActiveLink = (path) => {\r\n    return pathname === path;\r\n  };\r\n\r\n  return (\r\n    <nav className={`fixed top-0 left-0 right-0 z-50 bg-white dark:bg-gray-800 shadow-sm transition-all ${isScrolled ? 'shadow-md' : ''}`}>\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"flex justify-between h-16\">\r\n          <div className=\"flex\">\r\n            <div className=\"flex-shrink-0 flex items-center\">\r\n              <Link href=\"/\" className=\"flex items-center\">\r\n                <span className=\"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-500 to-blue-600\">\r\n                  GenreShift\r\n                </span>\r\n              </Link>\r\n            </div>\r\n            \r\n            {/* Desktop Navigation */}\r\n            <div className=\"hidden md:flex items-center space-x-6\">\r\n              <div className=\"space-x-6\">\r\n                <Link \r\n                  href=\"/workspace\" \r\n                  className={`transition ${\r\n                    isActiveLink('/workspace') \r\n                      ? 'text-indigo-600 dark:text-indigo-400 font-medium' \r\n                      : 'text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400'\r\n                  }`}\r\n                >\r\n                  工作台\r\n                </Link>\r\n                <Link \r\n                  href=\"/history\" \r\n                  className={`transition ${\r\n                    isActiveLink('/history') \r\n                      ? 'text-indigo-600 dark:text-indigo-400 font-medium' \r\n                      : 'text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400'\r\n                  }`}\r\n                >\r\n                  历史记录\r\n                </Link>\r\n                <Link \r\n                  href=\"/help\" \r\n                  className={`transition ${\r\n                    isActiveLink('/help') \r\n                      ? 'text-indigo-600 dark:text-indigo-400 font-medium' \r\n                      : 'text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400'\r\n                  }`}\r\n                >\r\n                  帮助中心\r\n                </Link>\r\n              </div>\r\n              \r\n              {/* Theme Toggle */}\r\n              <button \r\n                onClick={toggleDarkMode}\r\n                className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800\"\r\n                aria-label={isDarkMode ? \"切换到亮色模式\" : \"切换到暗色模式\"}\r\n              >\r\n                {isDarkMode ? (\r\n                  <svg className=\"w-5 h-5 text-yellow-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path fillRule=\"evenodd\" d=\"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z\" clipRule=\"evenodd\" />\r\n                  </svg>\r\n                ) : (\r\n                  <svg className=\"w-5 h-5 text-gray-700\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path d=\"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z\" />\r\n                  </svg>\r\n                )}\r\n              </button>\r\n              \r\n              {/* User Profile */}\r\n              <Link \r\n                href=\"/profile\" \r\n                className={`flex items-center rounded-full overflow-hidden ${\r\n                  isActiveLink('/profile') \r\n                    ? 'ring-2 ring-indigo-500 ring-offset-2 dark:ring-offset-gray-900' \r\n                    : ''\r\n                }`}\r\n              >\r\n                <div className=\"w-8 h-8 bg-gradient-to-r from-indigo-500 to-blue-500 flex items-center justify-center text-white font-medium\">\r\n                  用户\r\n                </div>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Mobile Menu Button */}\r\n          <div className=\"flex items-center space-x-4 md:hidden\">\r\n            {/* Theme Toggle (Mobile) */}\r\n            <button \r\n              onClick={toggleDarkMode}\r\n              className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800\"\r\n              aria-label={isDarkMode ? \"切换到亮色模式\" : \"切换到暗色模式\"}\r\n            >\r\n              {isDarkMode ? (\r\n                <svg className=\"w-5 h-5 text-yellow-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <path fillRule=\"evenodd\" d=\"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z\" clipRule=\"evenodd\" />\r\n                </svg>\r\n              ) : (\r\n                <svg className=\"w-5 h-5 text-gray-700\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <path d=\"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z\" />\r\n                </svg>\r\n              )}\r\n            </button>\r\n            \r\n            <button\r\n              onClick={() => setIsMenuOpen(!isMenuOpen)}\r\n              className=\"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none\"\r\n              aria-label=\"打开导航菜单\"\r\n            >\r\n              <svg className=\"w-6 h-6 text-gray-700 dark:text-gray-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d={isMenuOpen ? \"M6 18L18 6M6 6l12 12\" : \"M4 6h16M4 12h16M4 18h16\"} />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Mobile Menu */}\r\n      {isMenuOpen && (\r\n        <div className=\"md:hidden border-t border-gray-200 dark:border-gray-700\">\r\n          <div className=\"container mx-auto px-4 py-4 space-y-4\">\r\n            <Link \r\n              href=\"/workspace\"\r\n              onClick={() => setIsMenuOpen(false)}\r\n              className={`block px-4 py-2 rounded-md ${\r\n                isActiveLink('/workspace') \r\n                  ? 'bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 font-medium' \r\n                  : 'hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300'\r\n              }`}\r\n            >\r\n              工作台\r\n            </Link>\r\n            <Link \r\n              href=\"/history\"\r\n              onClick={() => setIsMenuOpen(false)}\r\n              className={`block px-4 py-2 rounded-md ${\r\n                isActiveLink('/history') \r\n                  ? 'bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 font-medium' \r\n                  : 'hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300'\r\n              }`}\r\n            >\r\n              历史记录\r\n            </Link>\r\n            <Link \r\n              href=\"/help\"\r\n              onClick={() => setIsMenuOpen(false)}\r\n              className={`block px-4 py-2 rounded-md ${\r\n                isActiveLink('/help') \r\n                  ? 'bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 font-medium' \r\n                  : 'hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300'\r\n              }`}\r\n            >\r\n              帮助中心\r\n            </Link>\r\n            <Link \r\n              href=\"/profile\"\r\n              onClick={() => setIsMenuOpen(false)}\r\n              className={`flex items-center px-4 py-2 rounded-md ${\r\n                isActiveLink('/profile') \r\n                  ? 'bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 font-medium' \r\n                  : 'hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300'\r\n              }`}\r\n            >\r\n              <div className=\"w-7 h-7 bg-gradient-to-r from-indigo-500 to-blue-500 rounded-full flex items-center justify-center text-white font-medium mr-3\">\r\n                用户\r\n              </div>\r\n              <span>个人中心</span>\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </nav>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 662, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/genreshift-web/app/history/page.js"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport Link from 'next/link';\r\nimport Navbar from '../components/Navbar';\r\nimport { getHistoryRecords, deleteHistoryRecord, deleteHistoryRecords, clearAllHistory } from '../utils/localStorage';\r\n\r\nexport default function History() {\r\n  // 状态管理\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [filter, setFilter] = useState('all'); // all, news, blog, summary\r\n  const [sortBy, setSortBy] = useState('date-desc'); // date-desc, date-asc, title-asc, title-desc\r\n  const [selectedItems, setSelectedItems] = useState([]);\r\n  const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);\r\n  const [itemToDelete, setItemToDelete] = useState(null);\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  \r\n  // 使用真实的历史记录数据\r\n  const [historyItems, setHistoryItems] = useState([]);\r\n  \r\n  // 每页显示数量\r\n  const itemsPerPage = 5;\r\n  \r\n  // 初始化加载数据 - 从localStorage中读取真实数据\r\n  useEffect(() => {\r\n    setIsLoading(true);\r\n    // 读取本地存储的历史记录\r\n    const localStorageData = getHistoryRecords();\r\n    \r\n    if (localStorageData.length > 0) {\r\n      setHistoryItems(localStorageData);\r\n    } else {\r\n      // 如果没有本地数据，使用默认的模拟数据（仅用于演示）\r\n      const mockData = [\r\n        {\r\n          id: 1,\r\n          title: \"人工智能在自然语言处理中的新突破\",\r\n          originalFileName: \"AI_NLP_Research_2023.pdf\",\r\n          date: \"2023-11-15\",\r\n          outputStyle: \"news\",\r\n          previewText: \"科技日报讯 近日，一项发表在《科学》杂志上的研究展示了人工智能在理解和生成人类语言方面的重大突破...\",\r\n          tags: [\"AI\", \"NLP\", \"研究\"],\r\n        },\r\n        {\r\n          id: 2,\r\n          title: \"新型纳米材料提高太阳能电池效率研究\",\r\n          originalFileName: \"Solar_Cell_Efficiency.pdf\",\r\n          date: \"2023-11-10\",\r\n          outputStyle: \"blog\",\r\n          previewText: \"一项发表在《自然·材料》上的研究展示了一种新型纳米结构材料，可将太阳能电池的转换效率提高近30%...\",\r\n          tags: [\"能源\", \"纳米技术\", \"材料科学\"],\r\n        },\r\n        {\r\n          id: 3,\r\n          title: \"脑科学研究揭示记忆形成机制\",\r\n          originalFileName: \"Brain_Memory_Research.pdf\",\r\n          date: \"2023-11-05\",\r\n          outputStyle: \"summary\",\r\n          previewText: \"近日，一项发表在《神经科学》杂志上的研究揭示了大脑形成长期记忆的全新机制...\",\r\n          tags: [\"脑科学\", \"神经科学\", \"医学\"],\r\n        },\r\n      ];\r\n      \r\n      setHistoryItems(mockData);\r\n    }\r\n    \r\n    setIsLoading(false);\r\n  }, []);\r\n  \r\n  // 处理搜索和筛选\r\n  const filteredItems = historyItems.filter(item => {\r\n    const matchesSearch = item.title.toLowerCase().includes(searchTerm.toLowerCase()) || \r\n                          (item.tags && item.tags.some(tag => tag.toLowerCase().includes(searchTerm.toLowerCase())));\r\n    \r\n    const matchesFilter = filter === 'all' || item.outputStyle === filter;\r\n    \r\n    return matchesSearch && matchesFilter;\r\n  });\r\n  \r\n  // 处理排序\r\n  const sortedItems = [...filteredItems].sort((a, b) => {\r\n    switch (sortBy) {\r\n      case 'date-desc':\r\n        return new Date(b.date) - new Date(a.date);\r\n      case 'date-asc':\r\n        return new Date(a.date) - new Date(b.date);\r\n      case 'title-asc':\r\n        return a.title.localeCompare(b.title);\r\n      case 'title-desc':\r\n        return b.title.localeCompare(a.title);\r\n      default:\r\n        return 0;\r\n    }\r\n  });\r\n  \r\n  // 分页\r\n  const totalPages = Math.ceil(sortedItems.length / itemsPerPage);\r\n  const currentItems = sortedItems.slice(\r\n    (currentPage - 1) * itemsPerPage,\r\n    currentPage * itemsPerPage\r\n  );\r\n  \r\n  // 切换选择项\r\n  const toggleItemSelection = (id) => {\r\n    if (selectedItems.includes(id)) {\r\n      setSelectedItems(selectedItems.filter(itemId => itemId !== id));\r\n    } else {\r\n      setSelectedItems([...selectedItems, id]);\r\n    }\r\n  };\r\n  \r\n  // 全选/取消全选\r\n  const toggleSelectAll = () => {\r\n    if (selectedItems.length === currentItems.length) {\r\n      setSelectedItems([]);\r\n    } else {\r\n      setSelectedItems(currentItems.map(item => item.id));\r\n    }\r\n  };\r\n  \r\n  // 确认删除\r\n  const confirmDelete = (id = null) => {\r\n    if (id) {\r\n      setItemToDelete(id);\r\n    }\r\n    setShowDeleteConfirm(true);\r\n  };\r\n  \r\n  // 执行删除\r\n  const executeDelete = () => {\r\n    if (itemToDelete) {\r\n      // 删除单个项目（同时从localStorage中删除）\r\n      const success = deleteHistoryRecord(itemToDelete);\r\n      if (success) {\r\n        setHistoryItems(historyItems.filter(item => item.id !== itemToDelete));\r\n        setSelectedItems(selectedItems.filter(id => id !== itemToDelete));\r\n      }\r\n    } else {\r\n      // 批量删除（同时从localStorage中删除）\r\n      const success = deleteHistoryRecords(selectedItems);\r\n      if (success) {\r\n        setHistoryItems(historyItems.filter(item => !selectedItems.includes(item.id)));\r\n        setSelectedItems([]);\r\n      }\r\n    }\r\n    \r\n    setShowDeleteConfirm(false);\r\n    setItemToDelete(null);\r\n  };\r\n  \r\n  // 获取样式类名\r\n  const getOutputStyleClass = (style) => {\r\n    switch (style) {\r\n      case 'news':\r\n        return 'bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300';\r\n      case 'blog':\r\n        return 'bg-purple-100 text-purple-800 dark:bg-purple-900/30 dark:text-purple-300';\r\n      case 'summary':\r\n        return 'bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300';\r\n      default:\r\n        return 'bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300';\r\n    }\r\n  };\r\n  \r\n  // 获取样式显示名称\r\n  const getOutputStyleName = (style) => {\r\n    switch (style) {\r\n      case 'news':\r\n        return '新闻';\r\n      case 'blog':\r\n        return '博客';\r\n      case 'summary':\r\n        return '摘要';\r\n      default:\r\n        return '未知';\r\n    }\r\n  };\r\n\r\n  // 格式化日期\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date.toLocaleDateString('zh-CN', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n    });\r\n  };\r\n\r\n  // 添加下载功能\r\n  const downloadResult = (item) => {\r\n    if (!item || !item.content) return;\r\n    \r\n    try {\r\n      // 创建Blob对象\r\n      const blob = new Blob([item.content], { type: 'text/plain;charset=utf-8' });\r\n      \r\n      // 创建一个临时链接\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      \r\n      // 设置文件名\r\n      const fileName = item.title \r\n        ? `${item.title.replace(/[^\\w\\s\\u4e00-\\u9fa5]/g, '_')}.txt` \r\n        : `转换结果_${new Date().toISOString().slice(0, 10)}.txt`;\r\n      a.download = fileName;\r\n      \r\n      // 触发下载\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      \r\n      // 清理\r\n      setTimeout(() => {\r\n        document.body.removeChild(a);\r\n        URL.revokeObjectURL(url);\r\n      }, 100);\r\n      \r\n      setToast({\r\n        show: true,\r\n        message: '文件已开始下载',\r\n        type: 'success'\r\n      });\r\n    } catch (error) {\r\n      console.error('下载文件失败:', error);\r\n      setToast({\r\n        show: true,\r\n        message: '下载失败，请重试',\r\n        type: 'error'\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 dark:bg-gray-900\">\r\n      {/* 使用统一导航栏 */}\r\n      <Navbar />\r\n      \r\n      <main className=\"container mx-auto px-6 py-8\">\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl font-bold text-gray-800 dark:text-gray-100 mb-4\">历史记录</h1>\r\n          <p className=\"text-gray-600 dark:text-gray-400\">查看、管理您转换过的所有论文</p>\r\n        </div>\r\n        \r\n        {/* 功能区 */}\r\n        <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-md p-6 mb-8\">\r\n          <div className=\"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0\">\r\n            {/* 搜索框 */}\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                <svg className=\"w-5 h-5 text-gray-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\r\n                </svg>\r\n              </div>\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"搜索标题或标签...\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                className=\"pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 block w-full md:w-64 lg:w-80 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100\"\r\n              />\r\n            </div>\r\n            \r\n            <div className=\"flex space-x-2\">\r\n              {/* 筛选选项 */}\r\n              <select\r\n                value={filter}\r\n                onChange={(e) => setFilter(e.target.value)}\r\n                className=\"px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-900 dark:text-gray-100\"\r\n              >\r\n                <option value=\"all\">全部类型</option>\r\n                <option value=\"news\">新闻</option>\r\n                <option value=\"blog\">博客</option>\r\n                <option value=\"summary\">摘要</option>\r\n              </select>\r\n              \r\n              {/* 排序选项 */}\r\n              <select\r\n                value={sortBy}\r\n                onChange={(e) => setSortBy(e.target.value)}\r\n                className=\"px-4 py-2 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-gray-900 dark:text-gray-100\"\r\n              >\r\n                <option value=\"date-desc\">最新优先</option>\r\n                <option value=\"date-asc\">最早优先</option>\r\n                <option value=\"title-asc\">标题 A-Z</option>\r\n                <option value=\"title-desc\">标题 Z-A</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* 历史记录列表 */}\r\n        {isLoading ? (\r\n          <div className=\"py-20 flex justify-center\">\r\n            <div className=\"w-12 h-12 border-4 border-indigo-200 dark:border-indigo-800 border-t-indigo-600 dark:border-t-indigo-400 rounded-full animate-spin\"></div>\r\n          </div>\r\n        ) : sortedItems.length === 0 ? (\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-md p-10 text-center\">\r\n            <svg className=\"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n            </svg>\r\n            <h3 className=\"text-xl font-medium text-gray-700 dark:text-gray-300 mb-2\">\r\n              {searchTerm || filter !== 'all' ? '找不到匹配的记录' : '暂无历史记录'}\r\n            </h3>\r\n            <p className=\"text-gray-500 dark:text-gray-400 mb-6\">\r\n              {searchTerm || filter !== 'all' \r\n                ? '请尝试更改搜索条件或清除筛选器' \r\n                : '使用工作台转换论文后，历史记录将显示在这里'}\r\n            </p>\r\n            <Link href=\"/workspace\" className=\"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-lg text-white transition\">\r\n              前往工作台\r\n            </Link>\r\n          </div>\r\n        ) : (\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-md overflow-hidden\">\r\n            {/* 批量操作栏 */}\r\n            <div className=\"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700\">\r\n              <div className=\"flex items-center\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={selectedItems.length > 0 && selectedItems.length === currentItems.length}\r\n                  onChange={toggleSelectAll}\r\n                  className=\"w-4 h-4 text-indigo-600 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-indigo-500\"\r\n                />\r\n                <span className=\"ml-3 text-sm text-gray-700 dark:text-gray-300\">\r\n                  {selectedItems.length === 0 \r\n                    ? '选择全部' \r\n                    : `已选择 ${selectedItems.length} 项`}\r\n                </span>\r\n              </div>\r\n              \r\n              {selectedItems.length > 0 && (\r\n                <button\r\n                  onClick={() => confirmDelete()}\r\n                  className=\"px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 rounded hover:bg-red-200 dark:hover:bg-red-800/40 transition text-sm\"\r\n                >\r\n                  删除所选\r\n                </button>\r\n              )}\r\n            </div>\r\n            \r\n            {/* 列表项 */}\r\n            <div className=\"divide-y divide-gray-200 dark:divide-gray-700\">\r\n              {currentItems.map(item => (\r\n                <div key={item.id} className=\"p-5 hover:bg-gray-50 dark:hover:bg-gray-750 transition\">\r\n                  <div className=\"flex items-start mb-4\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedItems.includes(item.id)}\r\n                      onChange={() => toggleItemSelection(item.id)}\r\n                      className=\"mt-1 w-4 h-4 text-indigo-600 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-indigo-500\"\r\n                    />\r\n                    \r\n                    <div className=\"ml-3 flex-1\">\r\n                      <div className=\"flex flex-wrap items-center justify-between gap-2\">\r\n                        <h3 className=\"text-lg font-medium text-gray-800 dark:text-gray-200\">\r\n                          {item.title}\r\n                        </h3>\r\n                        <span className={`text-xs px-2 py-1 rounded-full ${getOutputStyleClass(item.outputStyle)}`}>\r\n                          {getOutputStyleName(item.outputStyle)}\r\n                        </span>\r\n                      </div>\r\n                      \r\n                      <div className=\"flex items-center text-sm text-gray-500 dark:text-gray-400 mt-1\">\r\n                        <span className=\"mr-3\">\r\n                          原文件: {item.originalFileName}\r\n                        </span>\r\n                        <span>\r\n                          转换时间: {formatDate(item.date)}\r\n                        </span>\r\n                      </div>\r\n                      \r\n                      <div className=\"mt-3 text-gray-600 dark:text-gray-300 text-sm line-clamp-3\">\r\n                        {item.previewText}\r\n                      </div>\r\n                      \r\n                      {item.tags && item.tags.length > 0 && (\r\n                        <div className=\"mt-3 flex flex-wrap gap-2\">\r\n                          {item.tags.map((tag, index) => (\r\n                            <span \r\n                              key={index} \r\n                              className=\"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full\"\r\n                            >\r\n                              {tag}\r\n                            </span>\r\n                          ))}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                  \r\n                  <div className=\"flex justify-end space-x-2 mt-4\">\r\n                    <Link \r\n                      href={`/workspace?load=${item.id}`}\r\n                      className=\"px-3 py-1.5 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-700 dark:text-indigo-300 rounded-lg text-sm hover:bg-indigo-200 dark:hover:bg-indigo-800/40 transition\"\r\n                    >\r\n                      查看详情\r\n                    </Link>\r\n                    <button \r\n                      className=\"px-3 py-1.5 border border-gray-300 dark:border-gray-600 rounded-lg text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition\"\r\n                      onClick={() => downloadResult(item)}\r\n                    >\r\n                      分享\r\n                    </button>\r\n                    <button \r\n                      className=\"px-3 py-1.5 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-lg text-sm hover:bg-red-100 dark:hover:bg-red-800/30 transition\"\r\n                      onClick={() => confirmDelete(item.id)}\r\n                    >\r\n                      删除\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n            \r\n            {/* 分页 */}\r\n            {totalPages > 1 && (\r\n              <div className=\"px-4 py-3 bg-gray-50 dark:bg-gray-750 flex items-center justify-between border-t border-gray-200 dark:border-gray-700\">\r\n                <div>\r\n                  <p className=\"text-sm text-gray-500 dark:text-gray-400\">\r\n                    显示 <span className=\"font-medium\">{(currentPage - 1) * itemsPerPage + 1}</span> - <span className=\"font-medium\">{Math.min(currentPage * itemsPerPage, sortedItems.length)}</span> / <span className=\"font-medium\">{sortedItems.length}</span> 条记录\r\n                  </p>\r\n                </div>\r\n                <div className=\"flex space-x-2\">\r\n                  <button\r\n                    onClick={() => setCurrentPage(p => Math.max(1, p - 1))}\r\n                    disabled={currentPage === 1}\r\n                    className={`px-3 py-1 rounded-md text-sm ${\r\n                      currentPage === 1 \r\n                        ? 'bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed' \r\n                        : 'bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 border border-gray-300 dark:border-gray-600'\r\n                    }`}\r\n                  >\r\n                    上一页\r\n                  </button>\r\n                  {[...Array(totalPages)].map((_, i) => (\r\n                    <button\r\n                      key={i}\r\n                      onClick={() => setCurrentPage(i + 1)}\r\n                      className={`px-3 py-1 rounded-md text-sm ${\r\n                        currentPage === i + 1 \r\n                          ? 'bg-indigo-600 text-white' \r\n                          : 'bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 border border-gray-300 dark:border-gray-600'\r\n                      }`}\r\n                    >\r\n                      {i + 1}\r\n                    </button>\r\n                  ))}\r\n                  <button\r\n                    onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))}\r\n                    disabled={currentPage === totalPages}\r\n                    className={`px-3 py-1 rounded-md text-sm ${\r\n                      currentPage === totalPages \r\n                        ? 'bg-gray-100 dark:bg-gray-700 text-gray-400 dark:text-gray-500 cursor-not-allowed' \r\n                        : 'bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 border border-gray-300 dark:border-gray-600'\r\n                    }`}\r\n                  >\r\n                    下一页\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </main>\r\n      \r\n      {/* 删除确认弹窗 */}\r\n      <AnimatePresence>\r\n        {showDeleteConfirm && (\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50\"\r\n          >\r\n            <motion.div\r\n              initial={{ scale: 0.9, opacity: 0 }}\r\n              animate={{ scale: 1, opacity: 1 }}\r\n              exit={{ scale: 0.9, opacity: 0 }}\r\n              className=\"bg-white dark:bg-gray-800 rounded-xl shadow-xl p-6 max-w-md w-full\"\r\n            >\r\n              <div className=\"text-center\">\r\n                <svg className=\"w-16 h-16 mx-auto text-red-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                </svg>\r\n                <h3 className=\"text-xl font-medium text-gray-900 dark:text-gray-100 mt-4\">\r\n                  确认删除\r\n                </h3>\r\n                <p className=\"text-gray-600 dark:text-gray-400 mt-2\">\r\n                  {itemToDelete \r\n                    ? '确定要删除此记录吗？此操作无法撤销。' \r\n                    : `确定要删除选中的 ${selectedItems.length} 条记录吗？此操作无法撤销。`}\r\n                </p>\r\n              </div>\r\n              <div className=\"flex justify-center space-x-4 mt-6\">\r\n                <button\r\n                  onClick={() => setShowDeleteConfirm(false)}\r\n                  className=\"px-4 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition\"\r\n                >\r\n                  取消\r\n                </button>\r\n                <button\r\n                  onClick={executeDelete}\r\n                  className=\"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition\"\r\n                >\r\n                  确认删除\r\n                </button>\r\n              </div>\r\n            </motion.div>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n} "],"names":[],"mappings":"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","debugId":null}}]
}