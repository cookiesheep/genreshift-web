{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/genreshift-web/app/utils/offlineSupport.js"],"sourcesContent":["'use client';\r\n\r\n/**\r\n * 提取内容中的关键词和出现次数\r\n * @param {string} text 要分析的文本内容\r\n * @returns {string[]} 关键词数组\r\n */\r\nexport const extractKeywords = (text) => {\r\n  // 简单的关键词提取\r\n  const words = text.toLowerCase().split(/\\s+|[,.;:\"'?!，。；：\"\"'？！]/);\r\n  const stopWords = new Set(['the', 'a', 'an', 'in', 'on', 'at', 'of', 'to', 'and', 'is', 'are', 'was', 'were', 'be', 'been', 'being', 'this', 'that', 'these', 'those', '的', '了', '和', '与', '是', '在', '有', '被']);\r\n  \r\n  // 统计词频\r\n  const wordCount = {};\r\n  words.forEach(word => {\r\n    if (word.length > 1 && !stopWords.has(word)) {\r\n      wordCount[word] = (wordCount[word] || 0) + 1;\r\n    }\r\n  });\r\n  \r\n  // 排序并返回前10个\r\n  return Object.entries(wordCount)\r\n    .sort((a, b) => b[1] - a[1])\r\n    .slice(0, 10)\r\n    .map(([word]) => word);\r\n};\r\n\r\n/**\r\n * 生成离线后备内容\r\n * @param {string} content 原始内容\r\n * @param {object} parameters 转换参数\r\n * @returns {string} 生成的Markdown内容\r\n */\r\nexport const generateOfflineContent = (content, parameters) => {\r\n  if (!content) return '';\r\n  \r\n  // 提取内容\r\n  const extractedContent = content.substring(0, 1000);\r\n  const sentences = extractedContent.split(/[.!?。！？]+/).filter(s => s.trim().length > 0);\r\n  const keywords = extractKeywords(extractedContent);\r\n  \r\n  const language = parameters.language === 'zh' ? 'zh' : 'en';\r\n  const style = parameters.outputStyle;\r\n  const resultLength = parameters.length;\r\n  \r\n  if (language === 'zh') {\r\n    return generateChineseFallback(sentences, keywords, style, resultLength);\r\n  } else {\r\n    return generateEnglishFallback(sentences, keywords, style, resultLength);\r\n  }\r\n};\r\n\r\n/**\r\n * 生成中文后备内容\r\n */\r\nconst generateChineseFallback = (sentences, keywords, style, resultLength) => {\r\n  // 提取标题\r\n  const title = sentences[0]?.trim() || '论文概述';\r\n  \r\n  // 根据风格选择模板\r\n  let template = '';\r\n  \r\n  if (style === 'news') {\r\n    template = `# ${title.length > 20 ? title.substring(0, 20) + '...' : title}\\n\\n`;\r\n    template += `**关键要点**: ${keywords.slice(0, 5).join('、')}\\n\\n`;\r\n    template += `${sentences.slice(0, 3).join('。')}。\\n\\n`;\r\n    \r\n    if (resultLength !== 'short') {\r\n      template += `## 研究背景\\n\\n${sentences.slice(3, 5).join('。')}。\\n\\n`;\r\n      template += `## 研究方法\\n\\n据研究团队介绍，他们采用了创新的研究方法进行分析。${sentences.slice(5, 7).join('。')}。\\n\\n`;\r\n    }\r\n    \r\n    if (resultLength === 'long') {\r\n      template += `## 研究意义\\n\\n这项研究对${keywords[0]}领域具有重要意义。${sentences.slice(7, 10).join('。')}。\\n\\n`;\r\n      template += `## 未来展望\\n\\n研究团队表示，未来将继续深入研究这一问题，进一步探索${keywords.slice(1, 3).join('和')}的关系。\\n\\n`;\r\n    }\r\n    \r\n    template += `*注：本内容由系统离线生成，仅作参考。由于网络原因，无法获取完整的转换结果。*`;\r\n  } else if (style === 'blog') {\r\n    template = `# 探索${keywords[0]}的新视角：${title.length > 15 ? title.substring(0, 15) + '...' : title}\\n\\n`;\r\n    template += `近期，一项关于${keywords.slice(0, 3).join('、')}的研究引起了我的注意。${sentences.slice(0, 3).join('。')}。\\n\\n`;\r\n    \r\n    if (resultLength !== 'short') {\r\n      template += `## 为什么这很重要？\\n\\n${sentences.slice(3, 6).join('。')}。这些发现对于理解${keywords[0]}具有重要意义。\\n\\n`;\r\n    }\r\n    \r\n    if (resultLength === 'long') {\r\n      template += `## 深入分析\\n\\n如果仔细分析这项研究，我们可以发现几个关键点：\\n\\n- ${keywords[0]}与${keywords[1]}之间存在密切关联\\n- 研究方法新颖，采用了创新的分析框架\\n- 结果对${keywords[2]}领域提供了新的思路\\n\\n`;\r\n      template += `## 我的看法\\n\\n个人认为，这项研究虽然有价值，但仍有改进空间。未来研究可以更深入地探索${keywords.slice(3, 5).join('和')}的关系。\\n\\n`;\r\n    }\r\n    \r\n    template += `*注：本内容由系统离线生成，仅作参考。由于网络原因，无法获取完整的转换结果。*`;\r\n  } else {\r\n    // 摘要\r\n    template = `# ${title}摘要\\n\\n`;\r\n    template += `**核心概念**: ${keywords.slice(0, 5).join('、')}\\n\\n`;\r\n    template += `${sentences.slice(0, 3).join('。')}。\\n\\n`;\r\n    \r\n    if (resultLength !== 'short') {\r\n      template += `## 主要内容\\n\\n${sentences.slice(3, 8).join('。')}。\\n\\n`;\r\n    }\r\n    \r\n    if (resultLength === 'long') {\r\n      template += `## 研究结论\\n\\n基于以上内容，研究得出以下结论：\\n\\n- 关于${keywords[0]}的新发现\\n- ${keywords[1]}与${keywords[2]}的关系\\n- 对${keywords[3]}理论的验证\\n\\n`;\r\n    }\r\n    \r\n    template += `*注：本内容由系统离线生成，仅作参考。由于网络原因，无法获取完整的转换结果。*`;\r\n  }\r\n  \r\n  return template;\r\n};\r\n\r\n/**\r\n * 生成英文后备内容\r\n */\r\nconst generateEnglishFallback = (sentences, keywords, style, resultLength) => {\r\n  // 提取标题\r\n  const title = sentences[0]?.trim() || 'Paper Overview';\r\n  \r\n  // 根据风格选择模板\r\n  let template = '';\r\n  \r\n  if (style === 'news') {\r\n    template = `# ${title.length > 20 ? title.substring(0, 20) + '...' : title}\\n\\n`;\r\n    template += `**Key Points**: ${keywords.slice(0, 5).join(', ')}\\n\\n`;\r\n    template += `${sentences.slice(0, 3).join('. ')}.\\n\\n`;\r\n    \r\n    if (resultLength !== 'short') {\r\n      template += `## Research Background\\n\\n${sentences.slice(3, 5).join('. ')}.\\n\\n`;\r\n      template += `## Methodology\\n\\nAccording to the research team, they employed innovative research methods for analysis. ${sentences.slice(5, 7).join('. ')}.\\n\\n`;\r\n    }\r\n    \r\n    if (resultLength === 'long') {\r\n      template += `## Significance\\n\\nThis research has important implications for the field of ${keywords[0]}. ${sentences.slice(7, 10).join('. ')}.\\n\\n`;\r\n      template += `## Future Prospects\\n\\nThe research team stated that they will continue to study this issue in depth, further exploring the relationship between ${keywords.slice(1, 3).join(' and ')}.\\n\\n`;\r\n    }\r\n    \r\n    template += `*Note: This content is generated offline by the system for reference only. Due to network issues, the complete conversion result cannot be obtained.*`;\r\n  } else if (style === 'blog') {\r\n    // Blog style in English\r\n    template = `# A New Perspective on ${keywords[0]}: ${title.length > 15 ? title.substring(0, 15) + '...' : title}\\n\\n`;\r\n    template += `Recently, a study on ${keywords.slice(0, 3).join(', ')} caught my attention. ${sentences.slice(0, 3).join('. ')}.\\n\\n`;\r\n    \r\n    if (resultLength !== 'short') {\r\n      template += `## Why This Matters\\n\\n${sentences.slice(3, 6).join('. ')}. These findings are significant for understanding ${keywords[0]}.\\n\\n`;\r\n    }\r\n    \r\n    if (resultLength === 'long') {\r\n      template += `## In-Depth Analysis\\n\\nIf we analyze this research carefully, we can identify several key points:\\n\\n- There is a close connection between ${keywords[0]} and ${keywords[1]}\\n- The research method is novel, using an innovative analytical framework\\n- The results provide new insights for the field of ${keywords[2]}\\n\\n`;\r\n      template += `## My Take\\n\\nPersonally, I believe that while this research is valuable, there is still room for improvement. Future research could explore more deeply the relationship between ${keywords.slice(3, 5).join(' and ')}.\\n\\n`;\r\n    }\r\n    \r\n    template += `*Note: This content is generated offline by the system for reference only. Due to network issues, the complete conversion result cannot be obtained.*`;\r\n  } else {\r\n    // Summary in English\r\n    template = `# Summary of ${title}\\n\\n`;\r\n    template += `**Core Concepts**: ${keywords.slice(0, 5).join(', ')}\\n\\n`;\r\n    template += `${sentences.slice(0, 3).join('. ')}.\\n\\n`;\r\n    \r\n    if (resultLength !== 'short') {\r\n      template += `## Main Content\\n\\n${sentences.slice(3, 8).join('. ')}.\\n\\n`;\r\n    }\r\n    \r\n    if (resultLength === 'long') {\r\n      template += `## Research Conclusions\\n\\nBased on the above content, the study draws the following conclusions:\\n\\n- New findings about ${keywords[0]}\\n- The relationship between ${keywords[1]} and ${keywords[2]}\\n- Validation of theories regarding ${keywords[3]}\\n\\n`;\r\n    }\r\n    \r\n    template += `*Note: This content is generated offline by the system for reference only. Due to network issues, the complete conversion result cannot be obtained.*`;\r\n  }\r\n  \r\n  return template;\r\n};\r\n\r\n/**\r\n * Markdown渲染函数\r\n * @param {string} text Markdown文本\r\n * @returns {string} 渲染后的HTML\r\n */\r\nexport const renderMarkdown = (text) => {\r\n  if (!text) return '';\r\n  \r\n  return text\r\n    .replace(/^# (.*$)/gim, '<h1 class=\"text-2xl font-bold mb-4 mt-6\">$1</h1>')\r\n    .replace(/^## (.*$)/gim, '<h2 class=\"text-xl font-bold mb-3 mt-5\">$1</h2>')\r\n    .replace(/^### (.*$)/gim, '<h3 class=\"text-lg font-bold mb-2 mt-4\">$1</h3>')\r\n    .replace(/\\*\\*(.*)\\*\\*/gim, '<strong>$1</strong>')\r\n    .replace(/\\*(.*)\\*/gim, '<em>$1</em>')\r\n    .replace(/^> (.*$)/gim, '<blockquote class=\"border-l-4 border-gray-200 dark:border-gray-700 pl-4 py-2 my-3 text-gray-600 dark:text-gray-300 italic\">$1</blockquote>')\r\n    // 有序列表\r\n    .replace(/^(\\d+)\\. (.*$)/gim, '<div class=\"ml-5 list-decimal\"><li>$2</li></div>')\r\n    // 无序列表\r\n    .replace(/^- (.*$)/gim, '<div class=\"ml-5 list-disc\"><li>$1</li></div>')\r\n    // 代码块\r\n    .replace(/```([\\s\\S]*?)```/gim, '<pre class=\"bg-gray-100 dark:bg-gray-800 p-3 rounded-md my-3 overflow-x-auto\"><code>$1</code></pre>')\r\n    // 链接\r\n    .replace(/\\[(.*?)\\]\\((.*?)\\)/gim, '<a href=\"$2\" class=\"text-blue-600 dark:text-blue-400 hover:underline\" target=\"_blank\">$1</a>')\r\n    // 段落\r\n    .replace(/\\n\\n/gim, '</p><p class=\"my-2\">')\r\n    .replace(/\\n/gim, '<br />');\r\n}; "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/genreshift-web/app/utils/localStorage.js"],"sourcesContent":["/**\r\n * localStorage工具函数 - 用于管理历史记录、用户偏好设置和主题选择\r\n */\r\n\r\n// 常量定义\r\nconst HISTORY_KEY = 'genreshift_history';\r\nconst PREFERENCES_KEY = 'genreshift_preferences';\r\nconst THEME_KEY = 'genreshift_theme';\r\n\r\n// 默认值\r\nconst DEFAULT_PREFERENCES = {\r\n  defaultOutputStyle: 'news',\r\n  defaultLength: 'medium',\r\n  defaultFocus: 'general',\r\n  defaultLanguage: 'zh',\r\n  saveHistory: true,\r\n};\r\n\r\nconst DEFAULT_THEME = 'light';\r\n\r\n/**\r\n * 检查localStorage是否可用\r\n * @returns {boolean} localStorage是否可用\r\n */\r\nfunction isLocalStorageAvailable() {\r\n  try {\r\n    const test = '__storage_test__';\r\n    localStorage.setItem(test, test);\r\n    localStorage.removeItem(test);\r\n    return true;\r\n  } catch (e) {\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * 保存历史记录\r\n * @param {Object} record - 历史记录对象\r\n * @returns {boolean} 保存是否成功\r\n */\r\nexport function saveHistoryRecord(record) {\r\n  if (!isLocalStorageAvailable()) return false;\r\n  \r\n  try {\r\n    // 确保record具有必要的属性\r\n    if (!record.id || !record.date) {\r\n      record.id = record.id || Date.now().toString();\r\n      record.date = record.date || new Date().toISOString();\r\n    }\r\n    \r\n    const history = getHistoryRecords();\r\n    \r\n    // 检查是否已存在相同ID的记录\r\n    const existingIndex = history.findIndex(item => item.id === record.id);\r\n    if (existingIndex >= 0) {\r\n      // 更新现有记录\r\n      history[existingIndex] = { ...history[existingIndex], ...record };\r\n    } else {\r\n      // 添加新记录\r\n      history.push(record);\r\n    }\r\n    \r\n    localStorage.setItem(HISTORY_KEY, JSON.stringify(history));\r\n    return true;\r\n  } catch (error) {\r\n    console.error('保存历史记录失败:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * 获取所有历史记录\r\n * @returns {Array} 历史记录数组\r\n */\r\nexport function getHistoryRecords() {\r\n  if (!isLocalStorageAvailable()) return [];\r\n  \r\n  try {\r\n    const historyStr = localStorage.getItem(HISTORY_KEY);\r\n    return historyStr ? JSON.parse(historyStr) : [];\r\n  } catch (error) {\r\n    console.error('获取历史记录失败:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\n/**\r\n * 获取单个历史记录\r\n * @param {string} id - 记录ID\r\n * @returns {Object|null} 历史记录对象或null\r\n */\r\nexport function getHistoryRecord(id) {\r\n  if (!isLocalStorageAvailable() || !id) return null;\r\n  \r\n  try {\r\n    const history = getHistoryRecords();\r\n    return history.find(item => item.id === id) || null;\r\n  } catch (error) {\r\n    console.error('获取单个历史记录失败:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * 删除历史记录\r\n * @param {string} id - 记录ID\r\n * @returns {boolean} 删除是否成功\r\n */\r\nexport function deleteHistoryRecord(id) {\r\n  if (!isLocalStorageAvailable() || !id) return false;\r\n  \r\n  try {\r\n    let history = getHistoryRecords();\r\n    history = history.filter(item => item.id !== id);\r\n    localStorage.setItem(HISTORY_KEY, JSON.stringify(history));\r\n    return true;\r\n  } catch (error) {\r\n    console.error('删除历史记录失败:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * 删除多个历史记录\r\n * @param {Array} ids - 记录ID数组\r\n * @returns {boolean} 删除是否成功\r\n */\r\nexport function deleteHistoryRecords(ids) {\r\n  if (!isLocalStorageAvailable() || !Array.isArray(ids) || ids.length === 0) return false;\r\n  \r\n  try {\r\n    let history = getHistoryRecords();\r\n    history = history.filter(item => !ids.includes(item.id));\r\n    localStorage.setItem(HISTORY_KEY, JSON.stringify(history));\r\n    return true;\r\n  } catch (error) {\r\n    console.error('删除多个历史记录失败:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * 清空所有历史记录\r\n * @returns {boolean} 清空是否成功\r\n */\r\nexport function clearAllHistory() {\r\n  if (!isLocalStorageAvailable()) return false;\r\n  \r\n  try {\r\n    localStorage.setItem(HISTORY_KEY, JSON.stringify([]));\r\n    return true;\r\n  } catch (error) {\r\n    console.error('清空历史记录失败:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * 保存用户偏好设置\r\n * @param {Object} preferences - 用户偏好设置对象\r\n * @returns {boolean} 保存是否成功\r\n */\r\nexport function saveUserPreferences(preferences) {\r\n  if (!isLocalStorageAvailable()) return false;\r\n  \r\n  try {\r\n    // 合并现有偏好设置\r\n    const currentPreferences = getUserPreferences();\r\n    const updatedPreferences = { ...currentPreferences, ...preferences };\r\n    localStorage.setItem(PREFERENCES_KEY, JSON.stringify(updatedPreferences));\r\n    return true;\r\n  } catch (error) {\r\n    console.error('保存用户偏好设置失败:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * 获取用户偏好设置\r\n * @returns {Object} 用户偏好设置对象\r\n */\r\nexport function getUserPreferences() {\r\n  if (!isLocalStorageAvailable()) return DEFAULT_PREFERENCES;\r\n  \r\n  try {\r\n    const preferencesStr = localStorage.getItem(PREFERENCES_KEY);\r\n    return preferencesStr \r\n      ? { ...DEFAULT_PREFERENCES, ...JSON.parse(preferencesStr) } \r\n      : DEFAULT_PREFERENCES;\r\n  } catch (error) {\r\n    console.error('获取用户偏好设置失败:', error);\r\n    return DEFAULT_PREFERENCES;\r\n  }\r\n}\r\n\r\n/**\r\n * 保存主题偏好\r\n * @param {string} theme - 主题名称 ('light' 或 'dark')\r\n * @returns {boolean} 保存是否成功\r\n */\r\nexport function saveThemePreference(theme) {\r\n  if (!isLocalStorageAvailable()) return false;\r\n  \r\n  try {\r\n    // 确保theme是有效值\r\n    const validTheme = theme === 'dark' ? 'dark' : 'light';\r\n    localStorage.setItem(THEME_KEY, validTheme);\r\n    \r\n    // 同步更新HTML元素类名以立即应用主题\r\n    if (typeof document !== 'undefined') {\r\n      if (validTheme === 'dark') {\r\n        document.documentElement.classList.add('dark');\r\n      } else {\r\n        document.documentElement.classList.remove('dark');\r\n      }\r\n    }\r\n    \r\n    return true;\r\n  } catch (error) {\r\n    console.error('保存主题偏好失败:', error);\r\n    return false;\r\n  }\r\n}\r\n\r\n/**\r\n * 获取主题偏好\r\n * @returns {string} 主题名称 ('light' 或 'dark')\r\n */\r\nexport function getThemePreference() {\r\n  if (!isLocalStorageAvailable()) return DEFAULT_THEME;\r\n  \r\n  try {\r\n    const theme = localStorage.getItem(THEME_KEY);\r\n    return theme || DEFAULT_THEME;\r\n  } catch (error) {\r\n    console.error('获取主题偏好失败:', error);\r\n    return DEFAULT_THEME;\r\n  }\r\n}\r\n\r\n/**\r\n * 根据历史记录计算API使用统计\r\n * @returns {Object} API使用统计信息\r\n */\r\nexport function getApiUsageStats() {\r\n  if (!isLocalStorageAvailable()) {\r\n    return {\r\n      totalConverts: 0,\r\n      monthlyConverts: 0,\r\n      quota: {\r\n        limit: 100,\r\n        used: 0,\r\n        resetDate: getNextMonthDate(),\r\n      }\r\n    };\r\n  }\r\n  \r\n  try {\r\n    const history = getHistoryRecords();\r\n    const now = new Date();\r\n    const startOfMonth = new Date(now.getFullYear(), now.getMonth(), 1);\r\n    \r\n    // 计算本月转换次数\r\n    const monthlyConverts = history.filter(record => {\r\n      const recordDate = new Date(record.date);\r\n      return recordDate >= startOfMonth && recordDate <= now;\r\n    }).length;\r\n    \r\n    return {\r\n      totalConverts: history.length,\r\n      monthlyConverts,\r\n      quota: {\r\n        limit: 100, // 假设免费版每月限制100次转换\r\n        used: monthlyConverts,\r\n        resetDate: getNextMonthDate(),\r\n      }\r\n    };\r\n  } catch (error) {\r\n    console.error('计算API使用统计失败:', error);\r\n    return {\r\n      totalConverts: 0,\r\n      monthlyConverts: 0,\r\n      quota: {\r\n        limit: 100,\r\n        used: 0,\r\n        resetDate: getNextMonthDate(),\r\n      }\r\n    };\r\n  }\r\n}\r\n\r\n/**\r\n * 获取下个月的日期字符串\r\n * @returns {string} 下个月的日期字符串，格式为YYYY-MM-DD\r\n */\r\nfunction getNextMonthDate() {\r\n  const now = new Date();\r\n  const nextMonth = new Date(now.getFullYear(), now.getMonth() + 1, 1);\r\n  \r\n  const year = nextMonth.getFullYear();\r\n  const month = (nextMonth.getMonth() + 1).toString().padStart(2, '0');\r\n  const day = nextMonth.getDate().toString().padStart(2, '0');\r\n  \r\n  return `${year}-${month}-${day}`;\r\n}\r\n\r\n/**\r\n * 检查是否接近配额限制\r\n * @returns {boolean} 是否接近配额限制\r\n */\r\nexport function isNearQuotaLimit() {\r\n  const { quota } = getApiUsageStats();\r\n  // 如果已使用超过配额的85%，则返回true\r\n  return quota.used > (quota.limit * 0.85);\r\n}\r\n\r\n/**\r\n * 初始化主题\r\n * 根据localStorage中存储的主题偏好来设置文档的class\r\n */\r\nexport function initializeTheme() {\r\n  if (typeof document !== 'undefined') {\r\n    const theme = getThemePreference();\r\n    if (theme === 'dark') {\r\n      document.documentElement.classList.add('dark');\r\n    } else {\r\n      document.documentElement.classList.remove('dark');\r\n    }\r\n  }\r\n} "],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 444, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/genreshift-web/app/components/Navbar.js"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport { usePathname } from 'next/navigation';\r\nimport { getThemePreference, saveThemePreference } from '../utils/localStorage';\r\n\r\nexport default function Navbar() {\r\n  const pathname = usePathname();\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n  const [isDarkMode, setIsDarkMode] = useState(false);\r\n  const [isScrolled, setIsScrolled] = useState(false);\r\n\r\n  // 初始化主题\r\n  useEffect(() => {\r\n    const theme = getThemePreference();\r\n    setIsDarkMode(theme === 'dark');\r\n    \r\n    // 添加滚动监听\r\n    const handleScroll = () => {\r\n      setIsScrolled(window.scrollY > 10);\r\n    };\r\n    \r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, []);\r\n  \r\n  // 切换深色模式\r\n  const toggleDarkMode = () => {\r\n    const newMode = !isDarkMode;\r\n    setIsDarkMode(newMode);\r\n    saveThemePreference(newMode ? 'dark' : 'light');\r\n  };\r\n  \r\n  // 检查当前路径是否活跃\r\n  const isActiveLink = (path) => {\r\n    return pathname === path;\r\n  };\r\n\r\n  return (\r\n    <nav className={`fixed top-0 left-0 right-0 z-50 bg-white dark:bg-gray-800 shadow-sm transition-all ${isScrolled ? 'shadow-md' : ''}`}>\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"flex justify-between h-16\">\r\n          <div className=\"flex\">\r\n            <div className=\"flex-shrink-0 flex items-center\">\r\n              <Link href=\"/\" className=\"flex items-center\">\r\n                <span className=\"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-500 to-blue-600\">\r\n                  GenreShift\r\n                </span>\r\n              </Link>\r\n            </div>\r\n            \r\n            {/* Desktop Navigation */}\r\n            <div className=\"hidden md:flex items-center space-x-6\">\r\n              <div className=\"space-x-6\">\r\n                <Link \r\n                  href=\"/workspace\" \r\n                  className={`transition ${\r\n                    isActiveLink('/workspace') \r\n                      ? 'text-indigo-600 dark:text-indigo-400 font-medium' \r\n                      : 'text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400'\r\n                  }`}\r\n                >\r\n                  工作台\r\n                </Link>\r\n                <Link \r\n                  href=\"/history\" \r\n                  className={`transition ${\r\n                    isActiveLink('/history') \r\n                      ? 'text-indigo-600 dark:text-indigo-400 font-medium' \r\n                      : 'text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400'\r\n                  }`}\r\n                >\r\n                  历史记录\r\n                </Link>\r\n                <Link \r\n                  href=\"/help\" \r\n                  className={`transition ${\r\n                    isActiveLink('/help') \r\n                      ? 'text-indigo-600 dark:text-indigo-400 font-medium' \r\n                      : 'text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400'\r\n                  }`}\r\n                >\r\n                  帮助中心\r\n                </Link>\r\n              </div>\r\n              \r\n              {/* Theme Toggle */}\r\n              <button \r\n                onClick={toggleDarkMode}\r\n                className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800\"\r\n                aria-label={isDarkMode ? \"切换到亮色模式\" : \"切换到暗色模式\"}\r\n              >\r\n                {isDarkMode ? (\r\n                  <svg className=\"w-5 h-5 text-yellow-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path fillRule=\"evenodd\" d=\"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z\" clipRule=\"evenodd\" />\r\n                  </svg>\r\n                ) : (\r\n                  <svg className=\"w-5 h-5 text-gray-700\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                    <path d=\"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z\" />\r\n                  </svg>\r\n                )}\r\n              </button>\r\n              \r\n              {/* User Profile */}\r\n              <Link \r\n                href=\"/profile\" \r\n                className={`flex items-center rounded-full overflow-hidden ${\r\n                  isActiveLink('/profile') \r\n                    ? 'ring-2 ring-indigo-500 ring-offset-2 dark:ring-offset-gray-900' \r\n                    : ''\r\n                }`}\r\n              >\r\n                <div className=\"w-8 h-8 bg-gradient-to-r from-indigo-500 to-blue-500 flex items-center justify-center text-white font-medium\">\r\n                  用户\r\n                </div>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Mobile Menu Button */}\r\n          <div className=\"flex items-center space-x-4 md:hidden\">\r\n            {/* Theme Toggle (Mobile) */}\r\n            <button \r\n              onClick={toggleDarkMode}\r\n              className=\"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800\"\r\n              aria-label={isDarkMode ? \"切换到亮色模式\" : \"切换到暗色模式\"}\r\n            >\r\n              {isDarkMode ? (\r\n                <svg className=\"w-5 h-5 text-yellow-500\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <path fillRule=\"evenodd\" d=\"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z\" clipRule=\"evenodd\" />\r\n                </svg>\r\n              ) : (\r\n                <svg className=\"w-5 h-5 text-gray-700\" fill=\"currentColor\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                  <path d=\"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z\" />\r\n                </svg>\r\n              )}\r\n            </button>\r\n            \r\n            <button\r\n              onClick={() => setIsMenuOpen(!isMenuOpen)}\r\n              className=\"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-800 focus:outline-none\"\r\n              aria-label=\"打开导航菜单\"\r\n            >\r\n              <svg className=\"w-6 h-6 text-gray-700 dark:text-gray-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d={isMenuOpen ? \"M6 18L18 6M6 6l12 12\" : \"M4 6h16M4 12h16M4 18h16\"} />\r\n              </svg>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Mobile Menu */}\r\n      {isMenuOpen && (\r\n        <div className=\"md:hidden border-t border-gray-200 dark:border-gray-700\">\r\n          <div className=\"container mx-auto px-4 py-4 space-y-4\">\r\n            <Link \r\n              href=\"/workspace\"\r\n              onClick={() => setIsMenuOpen(false)}\r\n              className={`block px-4 py-2 rounded-md ${\r\n                isActiveLink('/workspace') \r\n                  ? 'bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 font-medium' \r\n                  : 'hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300'\r\n              }`}\r\n            >\r\n              工作台\r\n            </Link>\r\n            <Link \r\n              href=\"/history\"\r\n              onClick={() => setIsMenuOpen(false)}\r\n              className={`block px-4 py-2 rounded-md ${\r\n                isActiveLink('/history') \r\n                  ? 'bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 font-medium' \r\n                  : 'hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300'\r\n              }`}\r\n            >\r\n              历史记录\r\n            </Link>\r\n            <Link \r\n              href=\"/help\"\r\n              onClick={() => setIsMenuOpen(false)}\r\n              className={`block px-4 py-2 rounded-md ${\r\n                isActiveLink('/help') \r\n                  ? 'bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 font-medium' \r\n                  : 'hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300'\r\n              }`}\r\n            >\r\n              帮助中心\r\n            </Link>\r\n            <Link \r\n              href=\"/profile\"\r\n              onClick={() => setIsMenuOpen(false)}\r\n              className={`flex items-center px-4 py-2 rounded-md ${\r\n                isActiveLink('/profile') \r\n                  ? 'bg-indigo-50 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 font-medium' \r\n                  : 'hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300'\r\n              }`}\r\n            >\r\n              <div className=\"w-7 h-7 bg-gradient-to-r from-indigo-500 to-blue-500 rounded-full flex items-center justify-center text-white font-medium mr-3\">\r\n                用户\r\n              </div>\r\n              <span>个人中心</span>\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </nav>\r\n  );\r\n} "],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAOe,SAAS;;IACtB,MAAM,WAAW,CAAA,GAAA,qIAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAC7C,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAE7C,QAAQ;IACR,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;4BAAE;YACR,MAAM,QAAQ,CAAA,GAAA,+HAAA,CAAA,qBAAkB,AAAD;YAC/B,cAAc,UAAU;YAExB,SAAS;YACT,MAAM;iDAAe;oBACnB,cAAc,OAAO,OAAO,GAAG;gBACjC;;YAEA,OAAO,gBAAgB,CAAC,UAAU;YAClC;oCAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;;QACpD;2BAAG,EAAE;IAEL,SAAS;IACT,MAAM,iBAAiB;QACrB,MAAM,UAAU,CAAC;QACjB,cAAc;QACd,CAAA,GAAA,+HAAA,CAAA,sBAAmB,AAAD,EAAE,UAAU,SAAS;IACzC;IAEA,aAAa;IACb,MAAM,eAAe,CAAC;QACpB,OAAO,aAAa;IACtB;IAEA,qBACE,6LAAC;QAAI,WAAW,CAAC,mFAAmF,EAAE,aAAa,cAAc,IAAI;;0BACnI,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAI,WAAU;;8CACb,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC,+JAAA,CAAA,UAAI;wCAAC,MAAK;wCAAI,WAAU;kDACvB,cAAA,6LAAC;4CAAK,WAAU;sDAAgG;;;;;;;;;;;;;;;;8CAOpH,6LAAC;oCAAI,WAAU;;sDACb,6LAAC;4CAAI,WAAU;;8DACb,6LAAC,+JAAA,CAAA,UAAI;oDACH,MAAK;oDACL,WAAW,CAAC,WAAW,EACrB,aAAa,gBACT,qDACA,qFACJ;8DACH;;;;;;8DAGD,6LAAC,+JAAA,CAAA,UAAI;oDACH,MAAK;oDACL,WAAW,CAAC,WAAW,EACrB,aAAa,cACT,qDACA,qFACJ;8DACH;;;;;;8DAGD,6LAAC,+JAAA,CAAA,UAAI;oDACH,MAAK;oDACL,WAAW,CAAC,WAAW,EACrB,aAAa,WACT,qDACA,qFACJ;8DACH;;;;;;;;;;;;sDAMH,6LAAC;4CACC,SAAS;4CACT,WAAU;4CACV,cAAY,aAAa,YAAY;sDAEpC,2BACC,6LAAC;gDAAI,WAAU;gDAA0B,MAAK;gDAAe,SAAQ;gDAAY,OAAM;0DACrF,cAAA,6LAAC;oDAAK,UAAS;oDAAU,GAAE;oDAAuf,UAAS;;;;;;;;;;qEAG7hB,6LAAC;gDAAI,WAAU;gDAAwB,MAAK;gDAAe,SAAQ;gDAAY,OAAM;0DACnF,cAAA,6LAAC;oDAAK,GAAE;;;;;;;;;;;;;;;;sDAMd,6LAAC,+JAAA,CAAA,UAAI;4CACH,MAAK;4CACL,WAAW,CAAC,+CAA+C,EACzD,aAAa,cACT,mEACA,IACJ;sDAEF,cAAA,6LAAC;gDAAI,WAAU;0DAA+G;;;;;;;;;;;;;;;;;;;;;;;sCAQpI,6LAAC;4BAAI,WAAU;;8CAEb,6LAAC;oCACC,SAAS;oCACT,WAAU;oCACV,cAAY,aAAa,YAAY;8CAEpC,2BACC,6LAAC;wCAAI,WAAU;wCAA0B,MAAK;wCAAe,SAAQ;wCAAY,OAAM;kDACrF,cAAA,6LAAC;4CAAK,UAAS;4CAAU,GAAE;4CAAuf,UAAS;;;;;;;;;;6DAG7hB,6LAAC;wCAAI,WAAU;wCAAwB,MAAK;wCAAe,SAAQ;wCAAY,OAAM;kDACnF,cAAA,6LAAC;4CAAK,GAAE;;;;;;;;;;;;;;;;8CAKd,6LAAC;oCACC,SAAS,IAAM,cAAc,CAAC;oCAC9B,WAAU;oCACV,cAAW;8CAEX,cAAA,6LAAC;wCAAI,WAAU;wCAA2C,MAAK;wCAAO,QAAO;wCAAe,SAAQ;wCAAY,OAAM;kDACpH,cAAA,6LAAC;4CAAK,eAAc;4CAAQ,gBAAe;4CAAQ,aAAa;4CAAG,GAAG,aAAa,yBAAyB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAQrH,4BACC,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC,+JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,SAAS,IAAM,cAAc;4BAC7B,WAAW,CAAC,2BAA2B,EACrC,aAAa,gBACT,wFACA,6EACJ;sCACH;;;;;;sCAGD,6LAAC,+JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,SAAS,IAAM,cAAc;4BAC7B,WAAW,CAAC,2BAA2B,EACrC,aAAa,cACT,wFACA,6EACJ;sCACH;;;;;;sCAGD,6LAAC,+JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,SAAS,IAAM,cAAc;4BAC7B,WAAW,CAAC,2BAA2B,EACrC,aAAa,WACT,wFACA,6EACJ;sCACH;;;;;;sCAGD,6LAAC,+JAAA,CAAA,UAAI;4BACH,MAAK;4BACL,SAAS,IAAM,cAAc;4BAC7B,WAAW,CAAC,uCAAuC,EACjD,aAAa,cACT,wFACA,6EACJ;;8CAEF,6LAAC;oCAAI,WAAU;8CAAiI;;;;;;8CAGhJ,6LAAC;8CAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOpB;GAzMwB;;QACL,qIAAA,CAAA,cAAW;;;KADN","debugId":null}},
    {"offset": {"line": 827, "column": 0}, "map": {"version":3,"sources":["file://D%3A/code/genreshift-web/app/workspace/page.js"],"sourcesContent":["/**\r\n * 工作台页面 (Workspace)\r\n * \r\n * 此页面是用户上传和转换学术论文的核心区域，提供以下功能：\r\n * - 上传PDF、DOCX和TXT格式论文\r\n * - 设置转换参数（输出风格、内容长度、关注点、语言）\r\n * - 转换论文为易读内容\r\n * - 复制、保存或分享转换结果\r\n * - 离线模式下的备用内容生成\r\n * \r\n * 该页面已整合以下功能：\r\n * - 使用统一Navbar组件处理导航和主题切换\r\n * - 使用localStorage工具函数管理历史记录和用户偏好\r\n * - 使用offlineSupport工具函数处理离线内容生成和Markdown渲染\r\n */\r\n'use client';\r\n\r\nimport { useState, useCallback, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { useDropzone } from 'react-dropzone';\r\nimport axios from 'axios';\r\nimport mammoth from 'mammoth';\r\n// import * as pdfjsLib from 'pdfjs-dist';\r\nimport { renderMarkdown, generateOfflineContent } from '../utils/offlineSupport';\r\nimport { saveHistoryRecord, getUserPreferences, getHistoryRecord } from '../utils/localStorage';\r\nimport Navbar from '../components/Navbar';\r\nimport { useSearchParams } from 'next/navigation';\r\n\r\nexport default function Workspace() {\r\n  const searchParams = useSearchParams();\r\n\r\n  // 状态管理\r\n  const [file, setFile] = useState(null);\r\n  const [fileContent, setFileContent] = useState('');\r\n  const [convertedText, setConvertedText] = useState('');\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [processingProgress, setProcessingProgress] = useState(0);\r\n  const [isParameterPanelOpen, setIsParameterPanelOpen] = useState(true);\r\n  const [showOriginal, setShowOriginal] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [copied, setCopied] = useState(false);\r\n  // 添加网络状态检测\r\n  const [isOnline, setIsOnline] = useState(true);\r\n  // 添加警告状态\r\n  const [warning, setWarning] = useState(null);\r\n  // 在状态变量中添加分段处理相关的状态\r\n  const [processingSegments, setProcessingSegments] = useState(0);\r\n  const [totalSegments, setTotalSegments] = useState(0);\r\n  const [currentSegment, setCurrentSegment] = useState(0);\r\n  \r\n  // 检查网络状态\r\n  useEffect(() => {\r\n    setIsOnline(navigator.onLine);\r\n    \r\n    const handleOnline = () => setIsOnline(true);\r\n    const handleOffline = () => setIsOnline(false);\r\n    \r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n    \r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  }, []);\r\n  \r\n  // 转换参数 - 从用户偏好设置中初始化\r\n  const [parameters, setParameters] = useState({\r\n    outputStyle: 'news', // news, blog, summary\r\n    length: 'medium', // short, medium, long\r\n    focus: 'general', // general, methodology, results, implications\r\n    language: 'zh', // zh, en\r\n  });\r\n\r\n  // 初始化时读取用户偏好设置\r\n  useEffect(() => {\r\n    const userPreferences = getUserPreferences();\r\n    if (userPreferences) {\r\n      setParameters({\r\n        outputStyle: userPreferences.defaultOutputStyle || 'news',\r\n        length: userPreferences.defaultLength || 'medium',\r\n        focus: userPreferences.defaultFocus || 'general',\r\n        language: userPreferences.defaultLanguage || 'zh',\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  // 加载PDF.js\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined' && !window.pdfjsLib) {\r\n      const scriptPdf = document.createElement('script');\r\n      scriptPdf.src = 'https://cdn.jsdelivr.net/npm/pdfjs-dist@2.10.377/build/pdf.min.js';\r\n      scriptPdf.async = true;\r\n      \r\n      scriptPdf.onload = () => {\r\n        window.pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdn.jsdelivr.net/npm/pdfjs-dist@2.10.377/build/pdf.worker.min.js';\r\n      };\r\n      \r\n      document.body.appendChild(scriptPdf);\r\n    }\r\n  }, []);\r\n\r\n  // 深色模式状态已由Navbar组件处理，此处无需重复实现\r\n\r\n  // 处理PDF文件\r\n  const processPdfFile = (selectedFile) => {\r\n    if (!selectedFile) return;\r\n    \r\n    const reader = new FileReader();\r\n    setFile(selectedFile);\r\n    \r\n    reader.onload = async function() {\r\n      try {\r\n        // 确保PDF.js已加载\r\n        if (!window.pdfjsLib) {\r\n          throw new Error(\"PDF.js库尚未加载，请稍后再试\");\r\n        }\r\n        \r\n        const typedArray = new Uint8Array(reader.result);\r\n        const pdf = await window.pdfjsLib.getDocument({ data: typedArray }).promise;\r\n        let fullText = '';\r\n        \r\n        for (let i = 1; i <= pdf.numPages; i++) {\r\n          const page = await pdf.getPage(i);\r\n          const textContent = await page.getTextContent();\r\n          const pageText = textContent.items.map(item => item.str).join(' ');\r\n          fullText += pageText + '\\n\\n';\r\n        }\r\n        \r\n      // 限制内容长度，太长的内容会导致API超时\r\n      const maxContentLength = 25000; // 前端预处理，减少到25000字符\r\n        const content = fullText.substring(0, maxContentLength);\r\n        \r\n        if (fullText.length > maxContentLength) {\r\n        setWarning(`文件内容已被截断至${maxContentLength}字符以避免处理超时。仅处理前${maxContentLength}字符。`);\r\n      } else {\r\n        setWarning(null);\r\n      }\r\n        \r\n      setFileContent(content);\r\n        setIsProcessing(false);\r\n      } catch (error) {\r\n        console.error('PDF处理错误:', error);\r\n        // 回退到简单文本提取\r\n        try {\r\n          const text = new TextDecoder().decode(new Uint8Array(reader.result).slice(0, 1000000));\r\n          \r\n          // 限制内容长度\r\n          const maxContentLength = 25000;\r\n          const content = text.substring(0, maxContentLength);\r\n          \r\n          if (text.length > maxContentLength) {\r\n            setWarning(`文件内容已被截断至${maxContentLength}字符以避免处理超时。仅处理前${maxContentLength}字符。`);\r\n          } else {\r\n            setWarning(null);\r\n          }\r\n          \r\n          setFileContent(`PDF文件内容已提取（简单文本模式）：\\n\\n${content}`);\r\n        } catch (fallbackError) {\r\n          setFileContent(\"无法解析PDF文件。如果是扫描件或图片PDF，请尝试上传文本版本。\");\r\n        }\r\n        setIsProcessing(false);\r\n      }\r\n    };\r\n    \r\n    reader.onerror = () => {\r\n      setError(\"PDF文件读取失败\");\r\n      setIsProcessing(false);\r\n    };\r\n    \r\n    reader.readAsArrayBuffer(selectedFile);\r\n  };\r\n\r\n  // 拖放上传功能\r\n  const onDrop = useCallback(acceptedFiles => {\r\n    if (acceptedFiles && acceptedFiles.length > 0) {\r\n      const selectedFile = acceptedFiles[0];\r\n      \r\n      // 添加文件大小限制\r\n      const MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB\r\n      if (selectedFile.size > MAX_FILE_SIZE) {\r\n        setError(`文件过大，请上传小于10MB的文件`);\r\n        return;\r\n      }\r\n      \r\n      setFile(selectedFile);\r\n      setIsProcessing(true); // 开始处理\r\n      \r\n      // 根据文件类型使用不同的处理方法\r\n      if (selectedFile.type === 'application/pdf') {\r\n        processPdfFile(selectedFile);\r\n      } \r\n      else if (selectedFile.type === 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {\r\n        // Word文件处理\r\n        const reader = new FileReader();\r\n        reader.onload = function() {\r\n          mammoth.extractRawText({arrayBuffer: reader.result})\r\n            .then(result => {\r\n              setFileContent(result.value);\r\n              setIsProcessing(false);\r\n            })\r\n            .catch(error => {\r\n              console.error('Word处理错误:', error);\r\n              setError(\"Word文件处理失败: \" + error.message);\r\n              setIsProcessing(false);\r\n            });\r\n        };\r\n        reader.onerror = () => {\r\n          setError(\"Word文件读取失败\");\r\n          setIsProcessing(false);\r\n        };\r\n        reader.readAsArrayBuffer(selectedFile);\r\n      }\r\n      else {\r\n        // 文本文件处理\r\n        processTextFile(selectedFile);\r\n      }\r\n      \r\n      setError(null);\r\n    }\r\n  }, []);\r\n  \r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({ \r\n    onDrop,\r\n    accept: {\r\n      'application/pdf': ['.pdf'],\r\n      'text/plain': ['.txt'],\r\n      'application/vnd.openxmlformats-officedocument.wordprocessingml.document': ['.docx'],\r\n      'application/zip': ['.zip'],\r\n    }\r\n  });\r\n\r\n  // 处理参数更改\r\n  const handleParameterChange = (param, value) => {\r\n    setParameters(prev => ({\r\n      ...prev,\r\n      [param]: value\r\n    }));\r\n  };\r\n  \r\n  // 生成本地离线处理结果（当API不可用时）\r\n  const generateFallbackResult = () => {\r\n    if (!fileContent) return '';\r\n    return generateOfflineContent(fileContent, parameters);\r\n  };\r\n\r\n  // 转换论文\r\n  const convertPaper = async (retryAttempt = 0) => {\r\n    if (!file) {\r\n      setError(\"请先上传论文文件\");\r\n      return;\r\n    }\r\n    \r\n    setIsProcessing(true);\r\n    setProcessingProgress(0);\r\n    setError(null);\r\n    setProcessingSegments(0);\r\n    setTotalSegments(0);\r\n    setCurrentSegment(0);\r\n    \r\n    // 检查网络连接\r\n    if (!navigator.onLine) {\r\n      setError(\r\n        <div>\r\n          <p>网络连接不可用，请检查您的网络设置</p>\r\n          <button \r\n            onClick={() => convertPaper(retryAttempt + 1)}\r\n            className=\"mt-2 px-3 py-1 bg-indigo-100 text-indigo-700 rounded-md text-sm hover:bg-indigo-200 transition\"\r\n          >\r\n            重试\r\n          </button>\r\n        </div>\r\n      );\r\n      setIsProcessing(false);\r\n      return;\r\n    }\r\n    \r\n    // 模拟进度更加平滑\r\n    const progressInterval = setInterval(() => {\r\n      setProcessingProgress(prev => {\r\n        if (prev >= 70) {\r\n          clearInterval(progressInterval);\r\n          return 70;\r\n        }\r\n        return prev + (prev < 30 ? 1 : 0.3);\r\n      });\r\n    }, 150);\r\n    \r\n    try {\r\n      console.log('发送API请求，内容长度:', fileContent.length);\r\n      console.log('参数:', parameters);\r\n      \r\n      // 添加超时控制\r\n      const controller = new AbortController();\r\n      const timeoutId = setTimeout(() => controller.abort(), 25000);\r\n      \r\n      const response = await axios.post('/api/transform', {\r\n        content: fileContent,\r\n        parameters\r\n      }, {\r\n        signal: controller.signal,\r\n        onUploadProgress: (progressEvent) => {\r\n          const percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n          if (percentCompleted > 10) {\r\n            setProcessingProgress(10 + percentCompleted * 0.2);\r\n          }\r\n        }\r\n      });\r\n      \r\n      clearTimeout(timeoutId);\r\n      console.log('API响应成功:', response.status);\r\n      \r\n      // 更新分段信息\r\n      if (response.data.segments) {\r\n        setTotalSegments(response.data.segments);\r\n        setProcessingSegments(response.data.segments);\r\n      }\r\n      \r\n      clearInterval(progressInterval);\r\n      setProcessingProgress(95);\r\n      \r\n      const finalInterval = setInterval(() => {\r\n        setProcessingProgress(prev => {\r\n          if (prev >= 100) {\r\n            clearInterval(finalInterval);\r\n            setTimeout(() => {\r\n              // 保存结果\r\n              const result = response.data.result;\r\n              setConvertedText(result);\r\n              \r\n              // 保存到历史记录\r\n              const historyRecord = {\r\n                id: Date.now().toString(),\r\n                title: file.name.split('.')[0] || '未命名文档',\r\n                originalFileName: file.name,\r\n                date: new Date().toISOString(),\r\n                type: parameters.outputStyle, // 使用type字段以符合历史记录数据结构\r\n                length: parameters.length,\r\n                language: parameters.language,\r\n                focus: parameters.focus,\r\n                previewText: result.substring(0, 200) + (result.length > 200 ? '...' : ''),\r\n                content: result,\r\n                originalContent: fileContent.substring(0, 1000), // 只保存原始内容的一小部分\r\n                parameters: { ...parameters },\r\n                tags: generateTags(result),\r\n              };\r\n              \r\n              // 使用我们的localStorage工具函数保存历史记录\r\n              const saved = saveHistoryRecord(historyRecord);\r\n              if (saved) {\r\n              console.log('历史记录已保存');\r\n              } else {\r\n                console.error('历史记录保存失败');\r\n              }\r\n              \r\n              setShowOriginal(false);\r\n              setIsProcessing(false);\r\n            }, 500);\r\n            return 100;\r\n          }\r\n          return prev + 0.2;\r\n        });\r\n      }, 50);\r\n      \r\n    } catch (error) {\r\n      clearInterval(progressInterval);\r\n      console.error('转换过程出错详情:', error);\r\n      \r\n      let errorMessage = \"转换过程中发生错误\";\r\n      let retryAllowed = true;\r\n      let suggestionMessage = null;\r\n      \r\n      if (error.name === 'AbortError' || error.code === 'ECONNABORTED') {\r\n        errorMessage = \"请求超时，请尝试减少内容长度\";\r\n        suggestionMessage = \"建议：复制文章中最重要的部分（2000字以内）重新尝试\";\r\n      } else if (error.response) {\r\n        if (error.response.status === 504) {\r\n          errorMessage = \"处理超时，请尝试减少内容长度\";\r\n          suggestionMessage = \"建议：复制文章中最重要的部分（2000字以内）重新尝试\";\r\n        } else {\r\n          errorMessage = `服务器错误 (${error.response.status}): ${error.response.data.error || '未知错误'}`;\r\n          if (error.response.status >= 500) {\r\n            retryAllowed = false;\r\n          }\r\n        }\r\n      } else if (error.request) {\r\n        errorMessage = \"服务器没有响应，请检查网络连接\";\r\n      } else {\r\n        errorMessage = `请求错误: ${error.message}`;\r\n      }\r\n      \r\n      setError(\r\n        <div>\r\n          <p>{errorMessage}</p>\r\n          {suggestionMessage && <p className=\"text-sm text-gray-500 mt-1\">{suggestionMessage}</p>}\r\n          {retryAllowed && (\r\n            <button \r\n              onClick={() => convertPaper(retryAttempt + 1)}\r\n              className=\"mt-2 px-3 py-1 bg-indigo-100 text-indigo-700 rounded-md text-sm hover:bg-indigo-200 transition\"\r\n            >\r\n              重试转换\r\n            </button>\r\n          )}\r\n        </div>\r\n      );\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  // 复制到剪贴板\r\n  const copyToClipboard = () => {\r\n    navigator.clipboard.writeText(convertedText).then(() => {\r\n      setCopied(true);\r\n      setTimeout(() => setCopied(false), 2000);\r\n    });\r\n  };\r\n  \r\n  // 添加下载功能\r\n  const downloadResult = () => {\r\n    if (!convertedText) return;\r\n    \r\n    try {\r\n      // 创建Blob对象\r\n      const blob = new Blob([convertedText], { type: 'text/plain;charset=utf-8' });\r\n      \r\n      // 创建一个临时链接\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      \r\n      // 设置文件名\r\n      const fileName = file && file.name \r\n        ? `转换结果_${file.name.replace(/\\.[^/.]+$/, \"\").replace(/[^\\w\\s\\u4e00-\\u9fa5]/g, '_')}.txt` \r\n        : `转换结果_${new Date().toISOString().slice(0, 10)}.txt`;\r\n      a.download = fileName;\r\n      \r\n      // 触发下载\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      \r\n      // 清理\r\n      setTimeout(() => {\r\n        document.body.removeChild(a);\r\n        URL.revokeObjectURL(url);\r\n      }, 100);\r\n      \r\n    } catch (error) {\r\n      console.error('下载文件失败:', error);\r\n      setError('下载失败，请稍后重试');\r\n    }\r\n  };\r\n\r\n  // 手动保存当前转换结果\r\n  const saveResult = () => {\r\n    if (!convertedText || !file) return;\r\n    \r\n    // 创建历史记录对象\r\n    const historyRecord = {\r\n      id: Date.now().toString(),\r\n      title: file.name.split('.')[0] || '未命名文档',\r\n      originalFileName: file.name,\r\n      date: new Date().toISOString(),\r\n      type: parameters.outputStyle,\r\n      length: parameters.length,\r\n      language: parameters.language,\r\n      focus: parameters.focus,\r\n      previewText: convertedText.substring(0, 200) + (convertedText.length > 200 ? '...' : ''),\r\n      content: convertedText,\r\n      originalContent: fileContent.substring(0, 1000), // 只保存原始内容的一小部分\r\n      parameters: { ...parameters },\r\n      tags: generateTags(convertedText),\r\n    };\r\n    \r\n    // 使用localStorage工具函数保存\r\n    const saved = saveHistoryRecord(historyRecord);\r\n    if (saved) {\r\n      alert('结果已保存到历史记录');\r\n    } else {\r\n      alert('保存失败，请检查浏览器存储权限');\r\n    }\r\n  };\r\n\r\n  // 加载状态指示器组件，添加更详细的信息\r\n  const LoadingIndicator = ({ text }) => (\r\n    <div className=\"absolute inset-0 bg-white/90 dark:bg-gray-900/90 backdrop-blur-sm flex flex-col items-center justify-center z-10\">\r\n      <div className=\"w-20 h-20 border-4 border-indigo-200 dark:border-indigo-800 border-t-indigo-600 dark:border-t-indigo-400 rounded-full animate-spin\"></div>\r\n      <p className=\"mt-4 text-lg font-medium text-indigo-600 dark:text-indigo-400\">{text}</p>\r\n      {totalSegments > 0 && (\r\n        <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400\">\r\n          正在处理第 {currentSegment + 1}/{totalSegments} 段内容\r\n        </p>\r\n      )}\r\n      <p className=\"mt-2 text-sm text-gray-500 dark:text-gray-400 max-w-md text-center\">\r\n        {processingProgress < 50 \r\n          ? \"正在处理您的文件，大型文件可能需要更长时间...\" \r\n          : processingProgress < 90 \r\n            ? \"正在生成易读内容，请耐心等待...\" \r\n            : \"正在优化输出格式，即将完成...\"}\r\n      </p>\r\n      <div className=\"mt-4 w-64 bg-gray-200 dark:bg-gray-700 rounded-full h-2.5\">\r\n        <div \r\n          className=\"bg-gradient-to-r from-indigo-600 to-blue-500 h-2.5 rounded-full transition-all duration-300\"\r\n          style={{ width: `${processingProgress}%` }}\r\n        />\r\n      </div>\r\n      <p className=\"mt-1 text-xs text-gray-500 dark:text-gray-400\">{Math.round(processingProgress)}%</p>\r\n    </div>\r\n  );\r\n\r\n  // 文本文件处理逻辑\r\n  const processTextFile = (selectedFile) => {\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      // 限制内容长度\r\n      const maxContentLength = 25000;\r\n      const content = reader.result.substring(0, maxContentLength);\r\n      \r\n      if (reader.result.length > maxContentLength) {\r\n        setWarning(`文件内容已被截断至${maxContentLength}字符以避免处理超时。仅处理前${maxContentLength}字符。`);\r\n      } else {\r\n        setWarning(null);\r\n      }\r\n      \r\n      setFileContent(content);\r\n      setIsProcessing(false);\r\n    };\r\n    reader.onerror = () => {\r\n      setError(\"文件读取失败\");\r\n      setIsProcessing(false);\r\n    };\r\n    reader.readAsText(selectedFile);\r\n  };\r\n\r\n  // 从内容中生成标签\r\n  const generateTags = (content) => {\r\n    // 简单提取关键词作为标签\r\n    const commonWords = ['的', '了', '和', '与', '是', '在', '有', '被', 'the', 'a', 'an', 'in', 'on', 'at', 'of', 'to', 'and', 'is', 'are'];\r\n    const words = content.split(/\\s+|[,.;:\"'?!，。；：\"\"'？！]/);\r\n    \r\n    const wordCount = {};\r\n    words.forEach(word => {\r\n      if (word.length > 1 && !commonWords.includes(word.toLowerCase())) {\r\n        wordCount[word] = (wordCount[word] || 0) + 1;\r\n      }\r\n    });\r\n    \r\n    // 找出出现频率最高的词作为标签\r\n    return Object.entries(wordCount)\r\n      .sort((a, b) => b[1] - a[1])\r\n      .slice(0, 3)\r\n      .map(([word]) => word);\r\n  };\r\n\r\n  // 从历史记录加载数据\r\n  useEffect(() => {\r\n    // 检查URL参数是否含有load=id\r\n    const loadId = searchParams.get('load');\r\n    if (loadId) {\r\n      const historyRecord = getHistoryRecord(loadId);\r\n      if (historyRecord) {\r\n        // 设置转换参数\r\n        if (historyRecord.type) {\r\n          setParameters(prev => ({\r\n            ...prev,\r\n            outputStyle: historyRecord.type\r\n          }));\r\n        }\r\n        \r\n        if (historyRecord.length) {\r\n          setParameters(prev => ({\r\n            ...prev,\r\n            length: historyRecord.length\r\n          }));\r\n        }\r\n        \r\n        if (historyRecord.focus) {\r\n          setParameters(prev => ({\r\n            ...prev,\r\n            focus: historyRecord.focus\r\n          }));\r\n        }\r\n        \r\n        if (historyRecord.language) {\r\n          setParameters(prev => ({\r\n            ...prev,\r\n            language: historyRecord.language\r\n          }));\r\n        }\r\n        \r\n        // 设置标题为虚拟文件\r\n        if (historyRecord.originalTitle) {\r\n          const dummyFile = new File([\"\"], historyRecord.originalTitle, {\r\n            type: \"text/plain\"\r\n          });\r\n          setFile(dummyFile);\r\n        }\r\n        \r\n        // 设置原始内容和转换后内容\r\n        if (historyRecord.originalContent) {\r\n          setFileContent(historyRecord.originalContent);\r\n        }\r\n        \r\n        if (historyRecord.content) {\r\n          setConvertedText(historyRecord.content);\r\n          // 自动切换到转换结果标签\r\n          setShowOriginal(false);\r\n        }\r\n      }\r\n    }\r\n  }, [searchParams]);\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-b from-blue-50 to-indigo-50 dark:from-gray-900 dark:to-gray-800\">\r\n      {/* 使用统一的导航栏组件 */}\r\n      <Navbar />\r\n      \r\n      <div className=\"container mx-auto px-4 py-6 md:py-10\">\r\n        <h1 className=\"text-2xl md:text-3xl font-bold text-gray-800 dark:text-gray-100 mb-6\">\r\n          论文转换工作台\r\n        </h1>\r\n        \r\n        {/* 主布局 - 在大屏幕上是左右两栏，在小屏幕上是上下布局 */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n          {/* 左侧操作区 */}\r\n          <div className=\"relative bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 h-[calc(100vh-240px)] md:min-h-[600px] flex flex-col\">\r\n            {/* 参数面板切换按钮 */}\r\n            <button \r\n              onClick={() => setIsParameterPanelOpen(!isParameterPanelOpen)}\r\n              className=\"absolute left-2 top-2 z-10 p-2 rounded-full bg-white dark:bg-gray-700 shadow-md hover:shadow-lg transition-all\"\r\n              aria-label={isParameterPanelOpen ? '关闭参数面板' : '打开参数面板'}\r\n            >\r\n              <svg \r\n                className={`w-5 h-5 text-indigo-600 dark:text-indigo-400 transition-transform duration-300 ${isParameterPanelOpen ? 'rotate-180' : ''}`}\r\n                fill=\"none\" \r\n                stroke=\"currentColor\" \r\n                viewBox=\"0 0 24 24\" \r\n                xmlns=\"http://www.w3.org/2000/svg\"\r\n              >\r\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d={isParameterPanelOpen ? \"M15 19l-7-7 7-7\" : \"M9 5l7 7-7 7\"} />\r\n              </svg>\r\n            </button>\r\n            \r\n            {/* 参数设置面板 */}\r\n            <AnimatePresence>\r\n              {isParameterPanelOpen && (\r\n                <motion.div \r\n                  initial={{ opacity: 0, x: -20 }}\r\n                  animate={{ opacity: 1, x: 0 }}\r\n                  exit={{ opacity: 0, x: -20 }}\r\n                  className=\"mb-6 bg-indigo-50 dark:bg-gray-700/50 rounded-lg p-4\"\r\n                >\r\n                  <h3 className=\"text-lg font-medium text-gray-800 dark:text-gray-100 mb-3\">转换参数</h3>\r\n                  \r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    {/* 输出风格 */}\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">输出风格</label>\r\n                      <div className=\"flex space-x-2\">\r\n                        {[\r\n                          { id: 'news', label: '新闻' },\r\n                          { id: 'blog', label: '博客' },\r\n                          { id: 'summary', label: '摘要' }\r\n                        ].map(option => (\r\n                          <button\r\n                            key={option.id}\r\n                            className={`px-3 py-1.5 rounded-md text-sm font-medium transition-all ${\r\n                              parameters.outputStyle === option.id \r\n                                ? 'bg-indigo-600 text-white shadow-md' \r\n                                : 'bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-500'\r\n                            }`}\r\n                            onClick={() => handleParameterChange('outputStyle', option.id)}\r\n                          >\r\n                            {option.label}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                    {/* 输出长度 */}\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">输出长度</label>\r\n                      <div className=\"flex space-x-2\">\r\n                        {[\r\n                          { id: 'short', label: '简短' },\r\n                          { id: 'medium', label: '适中' },\r\n                          { id: 'long', label: '详细' }\r\n                        ].map(option => (\r\n                          <button\r\n                            key={option.id}\r\n                            className={`px-3 py-1.5 rounded-md text-sm font-medium transition-all ${\r\n                              parameters.length === option.id \r\n                                ? 'bg-indigo-600 text-white shadow-md' \r\n                                : 'bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-500'\r\n                            }`}\r\n                            onClick={() => handleParameterChange('length', option.id)}\r\n                          >\r\n                            {option.label}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                    \r\n                    {/* 关注点 */}\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">内容关注点</label>\r\n                      <select\r\n                        value={parameters.focus}\r\n                        onChange={(e) => handleParameterChange('focus', e.target.value)}\r\n                        className=\"block w-full rounded-md border-gray-300 dark:border-gray-600 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-700 dark:text-gray-200\"\r\n                      >\r\n                        <option value=\"general\">综合内容</option>\r\n                        <option value=\"methodology\">研究方法</option>\r\n                        <option value=\"results\">研究结果</option>\r\n                        <option value=\"implications\">研究意义</option>\r\n                      </select>\r\n                    </div>\r\n                    \r\n                    {/* 输出语言 */}\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">输出语言</label>\r\n                      <div className=\"flex space-x-2\">\r\n                        {[\r\n                          { id: 'zh', label: '中文' },\r\n                          { id: 'en', label: '英文' }\r\n                        ].map(option => (\r\n                          <button\r\n                            key={option.id}\r\n                            className={`px-3 py-1.5 rounded-md text-sm font-medium transition-all ${\r\n                              parameters.language === option.id \r\n                                ? 'bg-indigo-600 text-white shadow-md' \r\n                                : 'bg-white dark:bg-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-500'\r\n                            }`}\r\n                            onClick={() => handleParameterChange('language', option.id)}\r\n                          >\r\n                            {option.label}\r\n                          </button>\r\n                        ))}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </motion.div>\r\n              )}\r\n            </AnimatePresence>\r\n            {/* 文件上传区域 */}\r\n            <div className=\"flex-1 flex flex-col\">\r\n              <div\r\n                {...getRootProps()}\r\n                className={`flex-1 border-2 border-dashed rounded-xl flex flex-col items-center justify-center p-6 transition-all ${\r\n                  isDragActive ? 'border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20' : 'border-gray-300 dark:border-gray-600 hover:border-indigo-400 dark:hover:border-indigo-500'\r\n                } ${file ? 'bg-indigo-50 dark:bg-indigo-900/20' : ''}`}\r\n              >\r\n                <input {...getInputProps()} />\r\n                \r\n                {file ? (\r\n                  <div className=\"text-center\">\r\n                    <div className=\"w-16 h-16 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                      <svg className=\"w-8 h-8 text-indigo-600 dark:text-indigo-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\r\n                      </svg>\r\n                    </div>\r\n                    <h3 className=\"text-lg font-medium text-gray-800 dark:text-gray-100\">{file.name}</h3>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">\r\n                      {(file.size / 1024).toFixed(2)} KB · {file.type || '未知类型'}\r\n                    </p>\r\n                    <button \r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        setFile(null);\r\n                        setFileContent('');\r\n                      }}\r\n                      className=\"mt-4 px-3 py-1 bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 rounded-md text-sm hover:bg-red-200 dark:hover:bg-red-800/40 transition\"\r\n                    >\r\n                      删除文件\r\n                    </button>\r\n                  </div>\r\n                ) : (\r\n                  <>\r\n                    <div className=\"w-20 h-20 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center mb-4\">\r\n                      <svg className=\"w-10 h-10 text-indigo-600 dark:text-indigo-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12\" />\r\n                      </svg>\r\n                    </div>\r\n                    <h3 className=\"text-lg font-medium text-gray-800 dark:text-gray-100 text-center\">\r\n                      {isDragActive ? '释放文件以上传' : '拖放或点击上传论文'}\r\n                    </h3>\r\n                    <p className=\"text-sm text-gray-500 dark:text-gray-400 mt-2 text-center\">\r\n                      支持 PDF(文本格式)、TXT、DOCX 和 ZIP 文件\r\n                      <br />\r\n                      <span className=\"text-xs\">注：扫描件或图片PDF可能无法正确提取文本</span>\r\n                    </p>\r\n                  </>\r\n                )}\r\n              </div>\r\n            </div>\r\n            {/* 错误提示 */}\r\n            {error && (\r\n              <div className=\"mt-4 p-3 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-lg text-sm\">\r\n                <p className=\"font-medium\">出错了</p>\r\n                {error}\r\n              </div>\r\n            )}\r\n            \r\n            {/* 警告提示 - 内容过长 */}\r\n            {warning && (\r\n              <div className=\"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-300 rounded-lg text-sm\">\r\n                <p className=\"font-medium\">⚠️ 注意</p>\r\n                <p>{warning}</p>\r\n              </div>\r\n            )}\r\n            \r\n            {/* 操作按钮 */}\r\n            <div className=\"mt-6 flex justify-center\">\r\n              <button\r\n                onClick={convertPaper}\r\n                disabled={!file || isProcessing}\r\n                className={`px-6 py-3 rounded-xl font-medium text-white shadow-md transition-all transform ${\r\n                  !file || isProcessing \r\n                    ? 'bg-gray-400 dark:bg-gray-600 cursor-not-allowed' \r\n                    : 'bg-gradient-to-r from-indigo-600 to-blue-500 hover:from-indigo-700 hover:to-blue-600 hover:-translate-y-1 hover:shadow-lg'\r\n                }`}\r\n              >\r\n                {isProcessing ? '正在转换...' : '开始转换'}\r\n              </button>\r\n            </div>\r\n            \r\n            {/* 处理进度条 */}\r\n            {isProcessing && (\r\n              <LoadingIndicator text={\r\n                processingProgress < 50 \r\n                  ? \"正在处理您的文件，大型文件可能需要更长时间...\" \r\n                  : processingProgress < 90 \r\n                    ? \"正在生成易读内容，请耐心等待...\" \r\n                    : \"正在优化输出格式，即将完成...\"\r\n              } />\r\n            )}\r\n          </div>  \r\n          {/* 右侧结果展示区 */}\r\n          <div className=\"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden h-[calc(100vh-240px)] md:min-h-[600px] flex flex-col\">\r\n            {/* 选项卡切换 */}\r\n            <div className=\"flex border-b border-gray-200 dark:border-gray-700\">\r\n              <button\r\n                className={`flex-1 py-3 px-4 text-center font-medium text-sm transition-all ${\r\n                  showOriginal \r\n                    ? 'text-indigo-600 border-b-2 border-indigo-600' \r\n                    : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\r\n                }`}\r\n                onClick={() => setShowOriginal(true)}\r\n              >\r\n                原始论文\r\n              </button>\r\n              <button\r\n                className={`flex-1 py-3 px-4 text-center font-medium text-sm transition-all ${\r\n                  !showOriginal \r\n                    ? 'text-indigo-600 border-b-2 border-indigo-600' \r\n                    : 'text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300'\r\n                }`}\r\n                onClick={() => setShowOriginal(false)}\r\n              >\r\n                转换结果\r\n              </button>\r\n            </div>\r\n            \r\n            {/* 内容区域 */}\r\n            <div className=\"flex-1 overflow-auto p-6\">\r\n              {showOriginal ? (\r\n                file ? (\r\n                  <div className=\"prose dark:prose-invert max-w-none\">\r\n                    <h2 className=\"text-xl font-semibold mb-4 text-gray-800 dark:text-gray-100\">{file.name}</h2>\r\n                    <div className=\"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg whitespace-pre-wrap text-gray-800 dark:text-gray-200 h-[calc(100%-70px)] overflow-auto\">\r\n                      {fileContent || '正在加载内容...'}\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"h-full flex flex-col items-center justify-center text-gray-400 dark:text-gray-500\">\r\n                    <svg className=\"w-16 h-16 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z\" />\r\n                    </svg>\r\n                    <p className=\"text-lg\">转换后的内容将显示在这里</p>\r\n                  </div>\r\n                )\r\n              ) : (      \r\n                convertedText ? (\r\n                  <div className=\"relative\">\r\n                    <div className=\"prose prose-indigo dark:prose-invert max-w-none\">\r\n                      <div \r\n                        className=\"markdown-content\" \r\n                        dangerouslySetInnerHTML={{ \r\n                          __html: renderMarkdown(convertedText)\r\n                        }}\r\n                      />\r\n                    </div>\r\n                    \r\n                    {/* 操作按钮 */}\r\n                    <div className=\"flex justify-end mt-6 space-x-3\">\r\n                      <motion.button\r\n                        onClick={copyToClipboard}\r\n                        whileTap={{ scale: 0.95 }}\r\n                        className=\"px-4 py-2 bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg text-sm font-medium flex items-center transition\"\r\n                      >\r\n                        <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3\" />\r\n                        </svg>\r\n                        {copied ? '已复制' : '复制'}\r\n                      </motion.button>\r\n                      \r\n                      {!isOnline && (\r\n                        <motion.button\r\n                          onClick={() => {\r\n                            if (navigator.onLine) {\r\n                              convertPaper();\r\n                            } else {\r\n                              setError(<p>您当前处于离线状态，请连接网络后重试</p>);\r\n                            }\r\n                          }}\r\n                          whileTap={{ scale: 0.95 }}\r\n                          className=\"px-4 py-2 bg-green-100 dark:bg-green-900/30 hover:bg-green-200 dark:hover:bg-green-800/40 text-green-700 dark:text-green-300 rounded-lg text-sm font-medium flex items-center transition\"\r\n                        >\r\n                          <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\" />\r\n                          </svg>\r\n                          重新尝试\r\n                        </motion.button>\r\n                      )}\r\n                      \r\n                      <motion.button\r\n                        onClick={downloadResult}\r\n                        whileTap={{ scale: 0.95 }}\r\n                        className=\"px-4 py-2 bg-indigo-100 dark:bg-indigo-900/30 hover:bg-indigo-200 dark:hover:bg-indigo-800/40 text-indigo-700 dark:text-indigo-300 rounded-lg text-sm font-medium flex items-center transition\"\r\n                      >\r\n                        <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z\" />\r\n                        </svg>\r\n                        分享\r\n                      </motion.button>\r\n                      \r\n                      <motion.button\r\n                        onClick={saveResult}\r\n                        whileTap={{ scale: 0.95 }}\r\n                        className=\"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-medium flex items-center transition\"\r\n                      >\r\n                        <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12\" />\r\n                        </svg>\r\n                        保存\r\n                      </motion.button>\r\n                    </div>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"h-full flex flex-col items-center justify-center text-gray-400 dark:text-gray-500\">\r\n                    <svg className=\"w-16 h-16 mb-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z\" />\r\n                    </svg>\r\n                    <p className=\"text-lg\">转换后的内容将显示在这里</p>\r\n                  </div>\r\n                )\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* 加载状态 */}\r\n      {isProcessing && (\r\n        <LoadingIndicator text={\r\n          processingProgress < 50 \r\n            ? \"正在处理您的文件，大型文件可能需要更长时间...\" \r\n            : processingProgress < 90 \r\n              ? \"正在生成易读内容，请耐心等待...\" \r\n              : \"正在优化输出格式，即将完成...\"\r\n        } />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n        "],"names":[],"mappings":"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","debugId":null}}]
}